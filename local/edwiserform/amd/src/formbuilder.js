/*
 * Edwiser_Forms - https://edwiser.org/
 * Version: 0.1.0
 * Author: Yogesh Shirsath
*/
define([], function() {
	!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(a,o,function(t){return e[t]}.bind(null,o));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=16)}([function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var n={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=a(4),c=o(d),g=a(2),p=o(g),u=a(6),m=o(u),f=a(21),y=o(f),h=a(14),v=o(h),b=a(8),S=o(b),w=a(5),E=o(w),C=a(3),k=a(1),N=a(7),x=o(N),D=a(9),T=a(13),L=o(T),_=function(){function e(){r(this,e),this.stages=new Map,this.rows=new Map,this.columns=new Map,this.fields=new Map,this.styleSheet=function(){var e=document.createElement("style");return e.setAttribute("media","screen"),e.setAttribute("type","text/css"),e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}()}return s(e,[{key:"checkRecaptcha",value:function(e,t){return t?null===e.querySelector(".field-type-recaptcha")?void e.classList.remove("has-recaptcha"):void e.classList.add("has-recaptcha"):void 0}},{key:"processTagName",value:function(e){var t;if("string"==typeof e&&(e={tag:t=e}),e.attrs){var n=e.attrs.tag;if(n){var a=n.filter((function(e){return!0===e.selected}));a.length&&(t=a[0].value)}}return e.tag=t||e.tag,e}},{key:"hasFieldWithName",value:function(e){var t=!1;return C.formData.fields.forEach((function(n){p.default.get(n,"attrs.name")==e&&(t=!0)})),t}},{key:"getWrapperClass",value:function(e){return"g-recaptcha"==p.default.get(e,"className")?"g-recaptcha-wrapper":"textarea"==e.tag||"select"==e.tag?e.tag+"-wrapper":"input"==e.tag?"radio"==e.attrs.type||"checkbox"==e.attrs.type?"":"input-"+e.attrs.type+"-wrapper":""}},{key:"missingFormControlClass",value:function(e){var t=e.tag,n=p.default.get(e,"attrs.className")||p.default.get(e,"className")||"";return-1!=["input","textarea","select"].indexOf(t)&&-1==n.indexOf("form-control")&&(Array.isArray(n)?n.push("form-control"):n+=" form-control",p.default.set(e,"attrs.className",n)),e}},{key:"processClass",value:function(e){return void 0!==e.attrs&&void 0!==e.attrs.class&&(void 0===e.attrs.className?e.attrs.className=(0,k.clone)(e.attrs.class):Array.isArray(e.attrs.className)?e.attrs.className.push((0,k.clone)(e.attrs.class)):e.attrs.className+=" "+(0,k.clone)(e.attrs.class),delete e.attrs.class),e}},{key:"create",value:function(e){var t=this,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=this;e=o.processClass(e),e=o.processTagName(e);var n=void 0,l=e,r=l.tag,s=[],d=o.labelAfter(e),c=void 0,i="",g=this.getFormSettings();i=g.form["display-label"].value,"top"===i?i="":"left"===i&&(i="single-line");var u={tag:"div",attrs:{},className:[p.default.get(e,"config.inputWrap")||"f-field-group "+i+" "+this.getWrapperClass(e)],content:[],config:{}};null!=p.default.get(e,"attrs.wrapClass")&&(u.className+=" "+p.default.get(e,"attrs.wrapClass"),delete e.attrs.wrapClass);var m={tag:"span",className:"text-error",content:"*"},f=document.createElement(r),y=p.default.get(e,"attrs.required"),h={string:function(e){f.innerHTML+=e},object:function(e){return f.appendChild(o.create(e))},node:function(e){return f.appendChild(e)},array:function(e){for(var t=0;t<e.length;t++)n=o.contentType(e[t]),h[n](e[t])},function:function(e){e=e(),n=o.contentType(e),h[n](e)},undefined:function(){return null}};if(s.push("tag"),e.className){var v=e,b=v.className;e.attrs=Object.assign({},e.attrs,{className:b}),delete e.className}if(e.options||"country"==p.default.get(e,"meta.id")){var S=null;if(e.options?S=e.options:(S=[],Object.keys(this.countries).forEach((function(e){S.push({label:t.countries[e],value:e})}))),"input"==e.tag&&("radio"==e.attrs.type||"checkbox"==e.attrs.type)&&p.default.forEach(S,(function(t){t.name=e.attrs.name})),S=this.processOptions(S,e,a),!this.holdsContent(f)||"button"===r)return p.default.forEach(S,(function(e){u.content.push(o.create(e,a))})),u.config=Object.assign({},e.config),"input"==e.tag&&("radio"==e.attrs.type||"checkbox"==e.attrs.type)&&(u.attrs.wrapClass="input-"+e.attrs.type+"-wrapper"),y&&(u.attrs.required=y),this.create(u,a);h.array.call(this,S),delete e.content,s.push("options")}if(e.config){var w=e.config.editable&&a;if(p.default.get(e,"config.recaptcha")&&a&&(e.attrs.className+="-preview"),p.default.get(e,"config.recaptcha")&&!a){var E=3,C=function e(){Object.prototype.hasOwnProperty.call(window,"grecaptcha")&&Object.prototype.hasOwnProperty.call(window.grecaptcha,"render")?window.grecaptcha.render(f,{sitekey:o.sitekey,callback:function(e){e&&document.querySelector(".g-recaptcha-error").classList.remove("show")}}):0==--E?f.querySelector(".g-recaptcha").innerHTML=(0,k.getString)("efb-google-recaptcha-not-loaded"):setTimeout(e,1e3)};C()}if(e.config.label&&"button"!==r){var N=null;a?(N=o.label(e,"config.label"),!d&&y&&(N=[N,m])):("undefined"==p.default.get(e,"attrs.placeholder")&&(e.attrs.placeholder="label"in e.config?e.config.label:""),N=o.label(e),!d&&y&&N.append(this.create(m))),e.config.hideLabel?w&&(f.contentEditable=!0,d?(u.className="f-"+e.attrs.type,N.insertBefore(f,N.firstChild),u.content.push(N)):(u.content.push(N),u.content.push(f))):d?(u.className="f-"+e.attrs.type,N.insertBefore(f,N.firstChild),u.content.push(N)):(u.content.push(N),u.content.push(f))}else w&&(f.contentEditable=!0);s.push("config")}if(e=this.missingFormControlClass(e),e.attrs&&(o.processAttrs(e,f,a),s.push("attrs")),e.content&&(n=o.contentType(e.content),h[n].call(this,e.content),s.push("content")),e.dataset){for(var x in e.dataset)p.default.get(e.dataset,x)&&(f.dataset[x]=e.dataset[x]);s.push("dataset")}if(e.action){var D=Object.keys(e.action),T=function(e){setTimeout((function(){e(f)}),10)};for(c=D.length-1;0<=c;c--){var L=D[c],_=e.action[L];"string"==typeof _&&(_=eval("("+e.action[L]+")"));var A=["focus","blur"];if("onRender"===L)T(_);else{var I=p.default.inArray(L,A);f.addEventListener(L,_,I)}}s.push("action")}var O=["stage","row","column","field"];if(p.default.inArray(e.fType,O)){var P=e.fType+"Data";f[P]=e,"fieldData"==P&&(f.panelNav=e.panelNav),s.push(P)}var F=p.default.subtract(s,Object.keys(e));for(c=F.length-1;0<=c;c--)f[F[c]]=e[F[c]];return u.content.length&&(f=this.create(u)),f}},{key:"getImportFormContainer",value:function(e){var t=this,n={tag:"div",className:"import-container",content:[{tag:"input",attrs:{type:"file",className:"import-form-input",id:"import-form-input",accept:".json"}},{tag:"span",className:"import-form-error"}]};return this.create({tag:"div",className:"formeo-import-form",content:[{tag:"div",className:"import-form-container",content:[{tag:"button",attrs:{className:"import-form-button btn btn-primary",type:"button"},content:(0,k.getString)("import-form-button"),action:{click:function(){return"available"==A.license?void t.multiActions("success",(0,k.getString)("import-form-title"),n,[{title:(0,k.getString)("proceed"),type:"success",action:e}]):void A.proWarning((0,k.getString)("efb-form-import"))}}}]}]})}},{key:"icon",value:function(e){return document.getElementById("icon-"+e)?'<svg class="svg-icon svg-icon-'+e+'"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-'+e+'"></use></svg>':'<span class="fa fa-'+e+'" aria-hidden="true"></span>'}},{key:"processAttrs",value:function(e,t,n){var a=e.attrs,o=void 0===a?{}:a;n||o.name||!this.isInput(e.tag)||t.setAttribute("name",(0,k.uuid)(e)),Object.keys(o).forEach((function(e){var n=p.default.safeAttrName(e);if("tag"!=n){var a=o[e]||"";if(Array.isArray(a))if("object"===i(a[0])){var r=a.filter((function(e){return!0===e.selected}));a=r.length?r[0].value:a[0].value}else a=a.join(" ");a&&(t.attributes[n]=a,t.setAttribute(n,a))}}))}},{key:"checkbox",value:function(e){return{tag:"label",attrs:{},content:[e,{tag:"span",className:"checkable",content:p.default.get(e,"elem.config.label")||""}]}}},{key:"processOptions",value:function(e,t,n){var a=t.action,o=t.attrs,r=o.type||t.tag,i=o.id||t.id;return e.map((function(e,l){var s=function(){var s={tag:"input",attrs:(0,k.clone)(o),action:a};delete s.attrs.className,s.attrs.id=i+"-"+l,s.attrs.type=r,s.attrs.value=e.value||"";var c=[{tag:"span",className:"checkable"},{tag:"span",className:"checkable-label",content:e.label}],u={tag:"label",attrs:{},config:{inputWrap:"form-check"},content:[e.label]},d={tag:"div",content:[u],className:["f-"+r]};if(t.config.inputWrap=t.attrs.className?t.attrs.className:"f-"+r+"-group",t.config.inline&&d.className.push("f-${fieldType}-inline"),e.selected&&(s.attrs.checked=!0),"input"==t.tag&&("radio"==t.attrs.type||"checkbox"==t.attrs.type)&&(s.attrs.name=t.attrs.name),n){s.fMap="options["+l+"].selected",u.attrs.contenteditable=!0,u.fMap="options["+l+"].label",c[1].content=void 0;var f={tag:"label",content:[s,c]};d.content.unshift(f)}else u.content=c,u=A.create(u),s=A.create(s),u.insertBefore(s,u.firstChild),d.content=u;return d};return{select:function(){return{tag:"option",attrs:e,content:e.label}},button:function(e){var n=e.type,a=e.label,o=e.className,r=e.id;return Object.assign({},t,{attrs:{type:n},className:o,id:r||(0,k.uuid)(),options:void 0,content:a,action:t.action})},checkbox:s,radio:s,datalist:function(){return{tag:"option",attrs:{value:e.value},content:e.value}}}[r](e)}))}},{key:"holdsContent",value:function(e){return-1!==e.outerHTML.indexOf("/")}},{key:"isBlockInput",value:function(e){return!this.isInput(e)&&this.holdsContent(e)}},{key:"isInput",value:function(e){return"string"!=typeof e&&(e=e.tagName),-1!==["input","textarea","select"].indexOf(e)}},{key:"parsedHtml",value:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.textContent}},{key:"labelAfter",value:function(e){var t=p.default.get(e,"attrs.type");return"checkbox"===t||"radio"===t||p.default.get(e,"config.labelAfter")}},{key:"label",value:function(e,t){var n={tag:"label",attrs:{},className:["control-label"],content:p.default.isHtml(e.config.label)?p.default.stripHtml(e.config.label):e.config.label,action:{}};if(this.labelAfter(e)){var a={tag:"span",className:"checkable",content:e.config.label};n.content=a}return e.id&&(n.attrs.for=e.id),t&&(delete n.attrs.for,n.attrs.contenteditable=!0,n.fMap=t),A.create(n)}},{key:"contentType",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=void 0===e?"undefined":i(e);return null!==t&&-1!=["style"].indexOf(t)?n="textarea":e instanceof Node||e instanceof HTMLElement?n="node":Array.isArray(e)&&(n="array"),n}},{key:"getStyle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=void 0;return window.getComputedStyle?n=window.getComputedStyle(e,null):e.currentStyle&&(n=e.currentStyle),t?n[t]:n}},{key:"addStageTabItem",value:function(e){return{tag:"li",className:"stage-tab wfb-tab",id:"for-"+e.id,content:[{tag:"div",className:"stage-tab-before"},e.title,{tag:"div",className:"stage-tab-after"}],action:{click:function(t){if(!t.target.classList.contains("active")){var n=(0,k.closest)(t.target,"stage-tabs-wrapper"),a=n.parentElement.querySelector('.stage-wrap[id="'+e.id+'"]'),o=n.parentElement.querySelector(".stage-wrap.active");o.classList.remove("active"),o.classList.remove("show"),a.classList.add("active"),a.classList.add("show"),t.target.parentElement.querySelector(".active").classList.remove("active"),t.target.classList.add("active"),A.activeStage=a.querySelector(".stage"),A.toggleFormDeleteAction()}}}}}},{key:"getStageTabs",value:function(){var e=this,t=[];return C.formData.stages.forEach((function(n){t.push(e.addStageTabItem(n))})),t[0].className+=" active",t}},{key:"removeStage",value:function(e,t){var n=this,a=(0,k.closest)(e,"stage-tabs-wrapper"),o=void 0,r=function(e,t,r){var i=e.parentElement;switch(C.formData.stages.size){case 1:return!1;case 2:return a.remove(),(0,k.showControl)("layout-tab-control"),e.remove(),i.querySelector(".stage-wrap").classList.add("active"),i.querySelector(".stage-wrap").classList.add("show"),A.activeStage=i.querySelector(".stage-wrap").querySelector(".stage"),(o=C.formData.stages.get(A.activeStage.id)).title="Stage 1",C.formData.stages.set(A.activeStage.id,o),!0;default:return l.remove(),E.default.slideUp(r,666,(function(){n.resizeTabContainer(r),r.remove()})),e.remove(),A.activeStage=i.querySelector(".stage-wrap.active").querySelector(".stage"),!0}},i=(0,k.closest)(e,"stage-tab-wrap"),l=a.querySelector('[id="for-'+t+'"]'),s=a.parentElement.querySelector('[id="'+t+'"]'),c=a.parentElement.querySelector(".stage-wrap.active"),u=!1;if(s.id==c.id){var d;(d=s.nextSibling?s.nextSibling:s.previousSibling).classList.add("active"),d.classList.add("show");var f=d.id;a.querySelector('[id="for-'+f+'"]').classList.add("active"),u=r(s,0,i)}else u=r(s,0,i);1==u&&C.formData.stages.delete(t),n.toggleFormDeleteAction(),C.data.save()}},{key:"addStageTabListItem",value:function(e){var t=this,n={tag:"input",attrs:{type:"text",id:"title-for-"+e.id,value:e.title,className:"form-control"},action:{change:function(t){var n=t.target,a=n.value;(0,k.closest)(n,"stage-tabs-wrapper").querySelector('[id="for-'+e.id+'"]').innerText=a,C.data.updateStageTitle(e.id,a)}}};return{tag:"li",className:"stage-tab-wrap prop-wrap control-count-2",content:[{tag:"div",className:"prop-controls",content:[{tag:"button",attrs:{type:"button",className:"btn btn-primary prop-order prop-control"},content:t.icon("move-vertical")},{tag:"button",attrs:{type:"button",id:"remove-stage-"+e.id,className:"btn btn-danger prop-remove prop-control"},content:t.icon("remove"),action:{click:function(n){t.removeStage(n.target,e.id)}}}]},{tag:"div",className:"prop-input",content:[n]}]}}},{key:"repositionPanels",value:function(e){var t=e.querySelectorAll(".panel-labels .active-tab"),n=void 0;t.forEach((function(e){n=new CustomEvent("click",{target:e}),setTimeout((function(){e.dispatchEvent(n)}),500)}))}},{key:"resizeTabContainer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"list",n=(0,k.closest)(e,"panel-tab-"+t);if(n){var a=n.parentElement.style;a.height="auto"}}},{key:"getStageTabList",value:function(){var e=this,t={tag:"ul",className:"field-edit-group field-edit-tab",content:[]};C.formData.stages.forEach((function(n){t.content.push(e.addStageTabListItem(n))}));var n={tag:"div",className:"panel-action-buttons",content:[{tag:"button",attrs:{type:"button",className:"add-tab btn btn-primary"},content:(0,k.getString)("panelEditButtons.tabs"),action:{click:function(t){var n=C.data.addStage(),a=t.target,o=(0,k.closest)(a,"panel-tab-list").querySelector(".field-edit-tab"),r=(0,k.closest)(a,"form-container").querySelector(".stage-wrap.active").querySelector(".stage");A.activeStage=r;var i=(0,k.closest)(a,"stage-tabs-wrapper").querySelector(".stage-tabs-preview");r=C.formData.stages.get(n);var l=e.addStageTabListItem(r),s=e.addStageTabItem(r);o.appendChild(A.create(l)),i.appendChild(A.create(s)),e.resizeTabContainer(t.target),C.data.save(),e.toggleFormDeleteAction()}}}]};return[{tag:"div",className:"f-panel-wrap",content:t},n]}},{key:"reorderTabButtons",value:function(){var e=document.querySelector(".stage-tabs-wrapper"),t=e.querySelector(".field-edit-group"),n=e.querySelector(".stage-tabs-preview"),a=void 0,o=[],r=void 0;t.childNodes.forEach((function(e){e=e.querySelector("input"),r=(r=e.id).replace("title-",""),a=n.querySelector('[id="'+r+'"]'),o.push(a)})),o.forEach((function(e){n.appendChild(e)}))}},{key:"tabSorting",value:function(){var e=document.querySelector(".stage-tabs-wrapper").querySelector(".field-edit-group");c.default.create(e,{animation:150,group:{name:"stage-sort",pull:!0,put:!0},sort:!0,forceFallback:p.default.isFireFoxEdge(),draggable:".stage-tab-wrap",handle:".prop-order",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",onSort:function(){C.data.saveStageOrder(e.childNodes)}})}},{key:"getSettingItem",value:function(e,t,n,a){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null;null===o&&(o=a);var i={tag:"li",className:o+"-wrap setting-wrap",content:[{tag:"h5",className:o+"-label setting-label",content:t.title}]},l={tag:"div",attrs:{className:o+"-inputs setting-inputs"},content:[]},s=(0,k.uuid)(),c={tag:"input",attrs:{id:s,className:o+"-input setting-input",value:t.value},action:{change:function(t){var n=C.formData.settings.get(a),o=(0,k.elementTagType)(t.target),i=t.target,l=i.value;switch(o.tag){case"INPUT":switch(o.type){case"checkbox":n[r][e].value=i.checked;break;default:null===r?n[e].value=l:n[r][e].value=l}break;default:null===r?n[e].value=l:n[r][e].value=l}i.previousSibling?i.previousSibling.value=l:i.nextSibling&&(i.nextSibling.value=l),C.formData.settings.set(a,n),C.data.save()}}};switch(t.type){case"color":l.content.push({tag:"input",attrs:{className:o+"-input setting-input color-group",type:"text",value:t.value},action:{change:function(e){var t=e.target;t.nextSibling.value=t.value;var n=new CustomEvent("change",{target:t.nextSibling});t.nextSibling.dispatchEvent(n)}}}),c.attrs.className+=" color-group",c.attrs.type=t.type;break;case"text":case"number":c.attrs.type=t.type;break;case"range":c.action.mousemove=c.action.change,c.action.touchmove=c.action.change,c.action.pointermove=c.action.change,c.attrs.className+=" range-group",c.attrs.type=t.type,c.attrs=p.default.merge(c.attrs,t.attrs);break;case"select":c.tag="select",c.options=[],Object.values(t.options).forEach((function(e){e.selected=e.value==t.value,c.options.push(e)}));break;case"textarea":c.tag="textarea",c.cols=5,c.content=t.value,"style"==t.id&&(c.placeholder=(0,k.getString)("placeholder.style"));break;case"toggle":c.attrs.className+=" toggle-group",c.tag="input",c.type="checkbox",c.checked=t.value;break;default:c.attrs.type="text"}switch(l.content.push(c),t.type){case"range":l.content.push({tag:"input",attrs:{className:o+"-input setting-input range-group",type:"text",value:t.value},action:{change:function(e){var t=e.target;t.previousSibling.value=t.value;var n=new CustomEvent("change",{target:t.previousSibling});t.previousSibling.dispatchEvent(n)}}});break;case"toggle":l.content.push({tag:"label",attrs:{className:"bg-primary",for:s}})}var u={tag:"div",attrs:{className:o+"-control setting-control"},content:[{tag:"button",attrs:{class:o+"-default setting-default btn",type:"button","data-key":t.value,title:"Restore default"},content:{tag:"i",className:"fa fa-repeat"},action:{click:function(t){var n=t.target;"I"==n.tagName&&(n=n.parentElement);var o=C.formData.settings.get(a),i=n.parentElement.previousSibling.childNodes[0],l=(0,k.elementTagType)(i),s=n.getAttribute("data-key"),c=void 0,u=void 0,d=void 0;switch(l.tag){case"SELECT":for(c=i.childNodes,d=0;u=c[d];d++)if(u.value==s){i.selectedIndex=d;break}null===r?o[e].value=s:o[r][e].value=s;break;case"INPUT":switch(l.type){case"checkbox":i.checked="on"==s;break;default:i.value=s,null===r?o[e].value=s:o[r][e].value=s}break;default:i.value=s,null===r?o[e].value=s:o[r][e].value=s}var f=new CustomEvent("change",{target:i});i.dispatchEvent(f),C.formData.settings.set(a,o),C.data.save()}}}]},d={tag:"div",className:o+"-inputs-wrap setting-inputs-wrap",content:[l,u]};return i.content.push(d),i}},{key:"getTabDefaultConfigs",value:function(){return{default:{class:{title:(0,k.getString)("class"),id:"class",type:"text",value:"wfb-step"},"background-color":{title:(0,k.getString)("backgroundcolor"),id:"background-color",type:"color",value:"#838b8e"},color:{title:(0,k.getString)("textcolor"),id:"color",type:"color",value:"#ffffff"}},complete:{class:{title:(0,k.getString)("class"),id:"class",type:"text",value:"wfb-step completed"},"background-color":{title:(0,k.getString)("backgroundcolor"),id:"background-color",type:"color",value:"#46be8a"},color:{title:(0,k.getString)("textcolor"),id:"color",type:"color",value:"#ffffff"}},active:{class:{title:(0,k.getString)("class"),id:"class",type:"text",value:"wfb-step active"},"background-color":{title:(0,k.getString)("backgroundcolor"),id:"background-color",type:"color",value:"#62a8ea"},color:{title:(0,k.getString)("textcolor"),id:"color",type:"color",value:"#ffffff"}},danger:{class:{title:(0,k.getString)("class"),id:"class",type:"text",value:"wfb-step danger"},"background-color":{title:(0,k.getString)("backgroundcolor"),id:"background-color",type:"color",value:"#d9534f"},color:{title:(0,k.getString)("textcolor"),id:"color",type:"color",value:"#ffffff"}}}}},{key:"getConfigContainer",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this,a={tag:"h4",className:"category-label btn-primary p-10 m-0 collapsed",content:[(0,k.getString)("category-container-"+e),{tag:"i",className:"fa fa-plus"},{tag:"i",className:"fa fa-minus"}],action:{click:function(e){var a=e.target;"I"==a.tagName&&(a=a.parentElement);var o=a.nextSibling;if(a.classList.contains("collapsed")){o.style.height="auto";var r=o.clientHeight+"px";o.style.height="0px",a.classList.remove("collapsed"),a.classList.add("collapsible"),t&&n.resizeTabContainer(a,"config"),setTimeout((function(){o.style.height=r}),0)}else o.style.height="0px",a.classList.remove("collapsible"),a.classList.add("collapsed"),t&&n.resizeTabContainer(a,"config")}}};return{tag:"div",className:"category-container-"+e,content:[a,{tag:"ul",className:"category-settings",content:[]}]}}},{key:"getTabConfigs",value:function(){var e=this,t=e.getTabDefaultConfigs(),n=C.formData.settings.get("tabSettings"),a=[];return Object.keys(n).forEach((function(o){var r=e.getConfigContainer(o);Object.keys(n[o]).forEach((function(a){"border-color"==a||r.content[1].content.push(e.getSettingItem(a,n[o][a],t[o][a],"tabSettings","stage-config",o))})),a.push(r)})),{tag:"div",attrs:{className:"f-panel-wrap"},content:[{tag:"ul",className:"field-edit-group",content:a}]}}},{key:"getStageControl",value:function(){var e=this,t={tag:"button",content:e.icon("edit"),attrs:{className:["btn btn-primary item-edit-toggle"],type:"button"},meta:{id:"edit"},action:{click:function(e){var t=(0,k.closest)(e.target,"stage-tabs-wrapper"),n="stage-tabs",a="editing-"+n,o=t.querySelector("."+n+"-edit");t.classList.contains(a)?E.default.slideUp(o,666,(function(){E.default.slideDown(o.nextSibling,333,(function(){t.classList.remove(a)}))})):E.default.slideUp(o.nextSibling,333,(function(){E.default.slideDown(o,666,(function(){t.classList.add(a)}))}))}}},n={tag:"button",content:[e.icon("handle"),e.icon("remove")],attrs:{className:["btn btn-danger item-remove"],type:"button"},meta:{id:"remove"},action:{click:function(){var e=document.getElementById("efb-cont-form-builder");e.querySelectorAll(".stage-wrap:not(.active)").forEach((function(t){var n=e.querySelector('.prop-remove[id="remove-stage-'+t.id+'"]');A.removeStage(n,t.id)}))}}},a={tag:"div",config:{label:"Tab list"},attrs:{className:"f-panel panel-tab-list"},content:[e.getStageTabList()]},o={tag:"div",config:{label:"Tab config"},attrs:{className:"f-panel panel-tab-config"},content:[e.getTabConfigs()]},r=new x.default({id:"stage-tab-panel",panels:[a,o]}),i={tag:"div",className:"stage-tabs-wrapper wfb-tabs-view",id:"stage-tab-panel",content:[{tag:"div",className:"stage-tabs-actions group-actions",content:[{tag:"div",className:"action-btn-wrap",content:[n,t]}]},{tag:"div",className:"stage-tabs-edit field-edit",content:[{tag:"div",attrs:{className:"tab-edit panels-wrap tabbed-panels"},content:r.content,nav:r.nav,action:r.action}]},{tag:"ul",className:"stage-tabs-preview wfb-tabs",content:[e.getStageTabs()]}],action:{mouseenter:function(e){e.target.classList.add("hovering-stage-tabs")},mouseleave:function(){event.target.classList.remove("hovering-stage-tabs")}}};return setTimeout((function(){A.activeStage=document.querySelector(".stage-wrap.active .stage")}),666),i}},{key:"getElement",value:function(e){return{node:function(){return e},object:function(){return document.getElementById(e.id)},string:function(){return document.getElementById(e)}}[this.contentType(e)]()}},{key:"empty",value:function(e){for(;e.firstChild;)this.remove(e.firstChild);return e}},{key:"actionButtons",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"column",n=this,a="column"===t?"li":"div",o={tag:"div",className:"action-btn-wrap"},r={tag:a,className:t+"-actions group-actions",action:{mouseenter:function(n){var a=document.getElementById(e);a.classList.add("hovering-"+t),n.target.parentReference=a},mouseleave:function(e){e.target.parentReference.classList.remove("hovering-"+t)},onRender:function(e){var a=e.getElementsByTagName("button"),o=parseInt(n.getStyle(a[0],"width"))+1,r=a.length*o+"px",i="row"===t?"height":"width";n.insertRule([[".hovering-"+t+" ."+t+"-actions",[i,r,!0]]])}}};return o.content=this.config[t+"s"].actionButtons.buttons,r.content=o,r}},{key:"clone",value:function(e,t){var n=this,a=e.id,o=e.fType,r=(0,k.clone)(C.formData[o].get(a)),i=p.default.indexOfNode(e)+1,l=!1;return r.id=(0,k.uuid)(),C.formData[o].set(r.id,r),t||(t=e.parentElement,l=!0),{rows:function(){r.columns=[];var t=n.activeStage,a=n.addRow(null,r.id),o=e.getElementsByClassName("stage-columns");return t.insertBefore(a,t.childNodes[i]),p.default.forEach(o,(function(e){return n.clone(e,a)})),C.data.saveRowOrder(),a},columns:function(){r.fields=[];var a=n.addColumn(t.id,r.id);t.insertBefore(a,t.childNodes[i]),C.data.saveColumnOrder(t);var o=e.getElementsByClassName("stage-fields");return l&&A.columnWidths(t),p.default.forEach(o,(function(e){return n.clone(e,a)})),a},fields:function(){var e=n.addField(t.id,r.id,"clone");return t.insertBefore(e,t.childNodes[i]),C.data.saveFieldOrder(t),e}}[o]()}},{key:"canRemoveElement",value:function(e){var t=e.fType,n="",a={fields:function(e){e=C.formData.fields.get(e),p.default.get(e,"attrs.template")&&e.attrs.template&&(n+=e.config.label+"<br>")},columns:function(e){(e=C.formData.columns.get(e)).fields.forEach((function(e){a.fields(e)}))},rows:function(e){(e=C.formData.rows.get(e)).columns.forEach((function(e){a.columns(e)}))}};return a[t](e.id),""==n||(t=t.slice(0,t.length-1),n=(0,k.getString)("cannotremove",t)+n,this.alert("danger",n),!1)}},{key:"removeEmpty",value:function(e){var t=this,n=e.parentElement,a=e.fType,o=n.getElementsByClassName("stage-"+a);if(t.remove(e),!o.length){if("stages"!==n.fType)return t.removeEmpty(n);this.emptyClass(n)}return"columns"===a&&t.columnWidths(n),C.data.save()}},{key:"remove",value:function(e){var t=e.fType,n=e.id;if(t){var a=e.parentElement,o=C.formData[a.fType].get(a.id);C.data.empty(t,n),this[t].delete(n),C.formData[t].delete(n),(0,k.remove)(o[t],n)}return e.parentElement.removeChild(e)}},{key:"removeClasses",value:function(e,t){var n={string:function(e){e.className=e.className.replace(t,"")},array:function(e){for(var n=t.length-1;0<=n;n--)e.classList.remove(t[n])}};n.object=n.string,p.default.forEach(e,n[this.contentType(t)])}},{key:"addClasses",value:function(e,t){p.default.forEach(e,{string:function(e){e.classList.add(t)},array:function(e){for(var n=t.length-1;0<=n;n--)e.classList.add(t[n])}}[this.contentType(t)])}},{key:"fieldOrderClass",value:function(e){var t=e.querySelectorAll(".stage-fields");t.length&&(this.removeClasses(t,["first-field","last-field"]),t[0].classList.add("first-field"),t[t.length-1].classList.add("last-field"))}},{key:"columnWidths",value:function(e){var t=[],n=e.getElementsByClassName("stage-columns");if(n.length){var a=parseFloat((100/n.length).toFixed(1))/1;this.removeClasses(n,/\bcol-\w+-\d+/g),p.default.forEach(n,(function(e){var n=C.formData.columns.get(e.id);t.push.apply(t,l(n.fields));var o=(0,k.numToPercent)(a);e.style.width=o,e.style.float="left",n.config.width=o,e.dataset.colWidth=o,document.dispatchEvent(m.default.columnResized)})),setTimeout((function(){t.forEach((function(e){var t=A.fields.get(e);t.instance.panels&&t.instance.panels.nav.refresh()}))}),250),A.updateColumnPreset(e)}}},{key:"formGroup",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return{tag:"div",className:["f-field-group",t],content:e}}},{key:"columnPresetControl",value:function(e){var t=this,n=this,a=C.formData.rows.get(e),o={tag:"select",attrs:{ariaLabel:(0,k.getString)("columnlayout"),className:"column-preset"},action:{change:function(a){var o=t.rows.get(e);n.setColumnWidths(o.row,a.target.value),C.data.save()}}},r=new Map,i={value:"custom",label:(0,k.getString)("custom")};if(r.set(1,[{value:"100.0",label:"100%"}]),r.set(2,[{value:"50.0,50.0",label:"50 | 50"},{value:"33.3,66.6",label:"33 | 66"},{value:"66.6,33.3",label:"66 | 33"},{value:"25,75",label:"25 | 75"},{value:"75,25",label:"75 | 25"},i]),r.set(3,[{value:"33.3,33.3,33.3",label:"33 | 33 | 33"},{value:"50.0,25.0,25.0",label:"50 | 25 | 25"},{value:"25.0,50.0,25.0",label:"25 | 50 | 25"},{value:"25.0,25.0,50.0",label:"25 | 25 | 50"},{value:"60.0,20.0,20.0",label:"60 | 20 | 20"},{value:"20.0,60.0,20.0",label:"20 | 60 | 20"},{value:"20.0,20.0,60.0",label:"20 | 20 | 60"},i]),r.set(4,[{value:"25.0,25.0,25.0,25.0",label:"25 | 25 | 25 | 25"},{value:"30.0,30.0,20.0,20.0",label:"30 | 30 | 20 | 20"},{value:"20.0,30.0,30.0,20.0",label:"20 | 30 | 30 | 20"},{value:"20.0,20.0,30.0,30.0",label:"20 | 20 | 30 | 30"},{value:"30.0,20.0,20.0,30.0",label:"30 | 20 | 20 | 30"},i]),r.set("custom",[i]),a&&a.columns.length){var l=a.columns,s=r.get(l.length);o.options=s||r.get("custom");var c=l.map((function(e){return C.formData.columns.get(e).config.width.replace("%","")})).join(",");s&&s.forEach((function(e,t){var n=o.options;e.value===c?n[t].selected=!0:(delete n[t].selected,n[n.length-1].selected=!0)}))}else o.options=r.get(1);return o}},{key:"setColumnWidths",value:function(e,t){if("custom"!==t){t=t.split(",");var n=e.getElementsByClassName("stage-columns");p.default.forEach(n,(function(e,n){var a=t[n]+"%";e.dataset.colWidth=a,e.style.width=a,C.formData.columns.get(e.id).config.width=a}))}}},{key:"updateColumnPreset",value:function(e){var t=e.querySelector(".column-preset"),n=t.parentElement,a=this.columnPresetControl(e.id),o=this.create(a);return n.replaceChild(o,t),a}},{key:"coords",value:function(e){var t=e.getBoundingClientRect(),n=document.body.getBoundingClientRect();return{pageX:t.left+t.width/2,pageY:t.top-n.top-t.height/2}}},{key:"loadRows",value:function(e){var t=this;return e||(e=this.activeStage),C.formData.stages.get(e.id).rows.forEach((function(n){var a=t.addRow(e.id,n);t.loadColumns(a),A.updateColumnPreset(a),e.appendChild(a)}))}},{key:"loadColumns",value:function(e){var t=this;C.formData.rows.get(e.id).columns.forEach((function(n){var a=t.addColumn(e.id,n);t.loadFields(a)}))}},{key:"loadFields",value:function(e){var t=this;C.formData.columns.get(e.id).fields.forEach((function(n){return t.addField(e.id,n)})),this.fieldOrderClass(e)}},{key:"createColumn",value:function(e){var t="columns"===e.from.fType?e.item:new S.default(e.item.id),n=new v.default;return t.classList.add("first-field"),n.appendChild(t),C.formData.columns.get(n.id).fields.push(t.id),n}},{key:"processColumnConfig",value:function(e){e.className&&e.className.push("f-render-column");var t=e.config.width||"100%";return e.style="width: "+t,e}},{key:"checkValidity",value:function(e){if(e.classList.contains("input-checkbox-wrapper"))return 0==e.querySelectorAll('input[type="checkbox"][required]').length||0!=e.querySelectorAll('input[type="checkbox"][required]:checked').length;if(e.hasChildNodes()){for(var t=0;t<e.children.length;t++)if(!this.checkValidity(e.children[t]))return!1}else if("function"==typeof e.checkValidity)return e.setCustomValidity(""),!!e.checkValidity()||(e.hasAttribute("validation")&&e.setCustomValidity(e.getAttribute("validation")),e.reportValidity());return!0}},{key:"updateStageSteps",value:function(e,t,n){for(var a=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],o=document.querySelectorAll(".efb-steps ."+n.step),r=0;r<e;r++)o[r].className=n.complete;if(e<t){o[e].className=a?n.active:n.danger;for(var i=e+1;i<t;i++)o[i].className=n.step}}},{key:"changeStep",value:function(e,t,n,a){var o=document.getElementsByClassName("f-stage active")[0],r=t.getElementsByClassName("formeo-render")[0],i=Array.prototype.slice.call(r.children),l=i.indexOf(o),s=l+a,c=i.length,u=!1;0<=s&&s<c&&(u=this.checkValidity(i[l]),s<l||u?(this.updateStageSteps(s,c,n),i[s].classList.add("active"),i[s].classList.remove("d-none"),i[l].classList.remove("active"),i[l].classList.add("d-none"),0<s?document.getElementById("previous-step").classList.remove("d-none"):document.getElementById("previous-step").classList.add("d-none"),s<c-1?(document.getElementById("next-step").classList.remove("d-none"),document.getElementById("submit-form").classList.add("d-none")):(document.getElementById("next-step").classList.add("d-none"),document.getElementById("submit-form").classList.remove("d-none"))):!u&&this.updateStageSteps(l,c,n,!1),e.preventDefault()),s==c&&this.updateStageSteps(s,c,n)}},{key:"addStepItem",value:function(e,t){return{tag:"li",attrs:{id:"for-"+e.id,className:t},content:[{tag:"div",className:"wfb-step-before"},e.title,{tag:"div",className:"wfb-step-after"}]}}},{key:"getSteps",value:function(e){var t=this,n={tag:"ul",attrs:{className:"efb-steps p-0"},content:[]};return C.formData.stages.forEach((function(a){n.content.push(t.addStepItem(a,e.step))})),n.content[0].attrs.className=e.active,n}},{key:"getExtraStyles",value:function(e,t,n){var a=n[e]["background-color"].value,o=n[e].color.value;return"active"===e||"complete"===e||"danger"===e?"\n        "+t+" {\n          background-color: "+a+";\n          color: "+o+";\n        }\n        "+t+" .wfb-step-before {\n          border-color: "+a+";\n          border-left-color: transparent;\n        }\n        "+t+" .wfb-step-after {\n          border-left-color: "+a+";\n        }\n        ":"\n        "+t+" {\n          background-color: "+a+";\n          color: "+o+";\n        }\n        "+t+" .wfb-step-before {\n          border-color: "+a+";\n          border-left-color:transparent;\n        }\n        "+t+" .wfb-step-after {\n          border-color: transparent;\n          border-left-color: "+a+";\n        }\n        "}},{key:"processStepClasses",value:function(e,t){var n="",a=document.getElementById("wfb-styles-for-"+e),o=t[e].class.value.trim();o=o.split(" ");var r="";if(o.forEach((function(e){""!=e.trim()&&(r+="."+e)})),n+=this.getExtraStyles(e,r,t),null!==a)a.innerHTML=n;else{var i={tag:"style",attrs:{id:"wfb-styles-for-"+e},content:n};document.getElementsByTagName("body")[0].append(this.create(i))}}},{key:"getStepClass",value:function(e,t,n){var a=t[e].class.value,o=n[e].class.value;return this.processStepClasses(e,n),a==o?a:o}},{key:"getFormSubmitButton",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=this.getFormSettings();return{tag:"button",attrs:{id:"submit-form",className:n.submit.class.value+t,type:"button","data-processing":n.submit["processing-text"].value,style:n.submit.style.value},action:{click:function(){e.checkValidity(e.renderTarget)}},content:n.submit.text.value}}},{key:"getSubmitButtonPosition",value:function(){var e=this.getFormSettings().submit.position.value;return"text-"+(e=e||"center")}},{key:"prepareStageNavigation",value:function(e,t){var n=this;if(2>C.formData.stages.size)return null;var a=n.getTabDefaultConfigs(),o=C.formData.settings.get("tabSettings");void 0===o&&(o=a);var r={step:n.getStepClass("default",a,o),active:n.getStepClass("active",a,o),complete:n.getStepClass("complete",a,o),danger:n.getStepClass("danger",a,o)};return{navigation:{tag:"div",attrs:{className:["form-submit","step-navigation",this.getSubmitButtonPosition()]},content:[{tag:"button",attrs:{id:"previous-step",className:"btn btn-default d-none",type:"button"},action:{click:function(e){n.changeStep(e,t,r,-1)}},content:(0,k.getString)("efb-btn-previous")},n.getFormSubmitButton(" ml-2 d-none"),{tag:"button",attrs:{id:"next-step",className:"btn btn-primary ml-2",type:"button"},action:{click:function(e){n.changeStep(e,t,r,1)}},content:(0,k.getString)("efb-btn-next")}]},steps:n.getSteps(r)}}},{key:"createTabContainer",value:function(e){C.data.addStage();var t=this.container.querySelector(".form-container");A.activeStage=t.querySelector(".stage-wrap.active").querySelector(".stage");var n=A.getStageControl(),a=A.create(n);t.prepend(a),A.remove(e),document.querySelector(".layout-tab-control")&&(0,k.hideControl)("layout-tab-control"),A.tabSorting(),this.toggleFormDeleteAction()}},{key:"getFormDefaultSettings",value:function(){var e={class:{title:(0,k.getString)("class"),id:"class",type:"text",value:"efb-form"},"background-color":{title:(0,k.getString)("backgroundcolor"),id:"background-color",type:"color",value:"#ffffff"},width:{title:(0,k.getString)("form-width"),id:"width",type:"range",value:"100",attrs:{min:"20",max:"100"}},responsive:{title:(0,k.getString)("form-responsive"),id:"responsive",type:"toggle",value:!0},padding:{title:(0,k.getString)("form-padding"),id:"padding",type:"range",value:"40",attrs:{min:"0",max:"100"}},color:{title:(0,k.getString)("textcolor"),id:"color",type:"color",value:"#000000"},"display-label":{title:(0,k.getString)("display-label"),id:"display-label",type:"select",value:"top",options:{option1:{value:"off",label:(0,k.getString)("display-label-off")},option2:{value:"top",label:(0,k.getString)("display-label-top")},option3:{value:"left",label:(0,k.getString)("display-label-left")}}},style:{title:(0,k.getString)("customcssstyle"),id:"style",type:"textarea",value:""}},t={class:{title:(0,k.getString)("class"),id:"class",type:"text",value:"btn btn-primary"},text:{title:(0,k.getString)("submitbuttontext"),id:"text",type:"text",value:"Submit"},"processing-text":{title:(0,k.getString)("submitbuttonprocessingtext"),id:"processing-text",type:"text",value:"Submitting...."},position:{title:(0,k.getString)("submitbuttonposition"),id:"position",type:"select",value:"center",options:{option1:{value:"left",label:(0,k.getString)("position-left")},option2:{value:"center",label:(0,k.getString)("position-center")},option3:{value:"right",label:(0,k.getString)("position-right")}}},style:{title:(0,k.getString)("customcssstyle"),id:"style",type:"textarea",value:""}};return{page:{class:{title:(0,k.getString)("class"),id:"class",type:"text",value:""},"background-opacity":{title:(0,k.getString)("page-background-opacity"),id:"background-opacity",type:"range",value:"0",attrs:{step:"0.1",min:"0",max:"1"}},style:{title:(0,k.getString)("customcssstyle"),id:"style",type:"textarea",value:""}},form:e,submit:t}}},{key:"getFormSettings",value:function(){var e=this.getFormDefaultSettings();return null!=C.formData.settings.get("formSettings")&&Object.keys(e).forEach((function(t){Object.assign(e[t],C.formData.settings.get("formSettings")[t])})),e}},{key:"mergeStyles",value:function(e,t){var n={},a=void 0,o=void 0,r="",i=void 0;return""!=(t=t.trim())&&(t=t.split(";"),p.default.forEach(t,(function(e){""!=(e=e.trim())&&(i=e.indexOf(":"),a=e.substring(0,i).trim(),o=e.substring(i+1).trim(),""!=a&&""!=o&&(n[a]=o))})),e=p.default.merge(e,n)),Object.keys(e).forEach((function(t){r+=t+": "+e[t]+"; "})),r}},{key:"getMaxColumnCount",value:function(){if(0==C.formData.rows.size)return 0;var e=0;return C.formData.rows.forEach((function(t){t.columns.length>e&&(e=t.columns.length)})),e}},{key:"manageFormWidth",value:function(){var e=this,t=this.getFormSettings(),n=this.getMaxColumnCount(),a=t.form.width?t.form.width.value:"100";this.renderTarget.style.width=a+"%";var o=function(t){1==t?e.renderTarget.classList.add("edwiser-inline-form"):e.renderTarget.classList.remove("edwiser-inline-form")};if(0!=t.form.responsive.value){var r=document.getElementById("formeo-rendered-"+(document.getElementsByClassName("formeo-render").length-1)).offsetWidth;o(0!==n&&1!==n&&(2===n?360>r:3===n?480>r:4===n?640>r:800>r))}else o(!1)}},{key:"processFormSettings",value:function(e){var t=this.getFormSettings(),n=t.form.class?t.form.class.value:"",a=t.form.color?t.form.color.value:"inherit",o=t.form["background-color"]?t.form["background-color"].value:"inherit",r=t.form.padding?t.form.padding.value:"25",i=100==(t.form.width?t.form.width.value:"100")?"0 auto":"5% auto";e.classList.add(n);var l=t.form.style?t.form.style.value:"";l=this.mergeStyles({color:a,"background-color":o,margin:i,padding:r+"px"},l),e.setAttribute("style",l),this.manageFormWidth()}},{key:"processPageSettings",value:function(e){var t=this.getFormSettings(),n=t.page.class?t.page.class.value:"",a=t.page.style?t.page.style.value:"",o=t.page["background-opacity"]?t.page["background-opacity"].value:"0";e.parentElement.style.background="rgba(0, 0, 0, "+o+")",e.parentElement.style.margin="0",e.parentElement.style.padding="0";var r=document.getElementById("efb-cont-form-preview");""!=n&&r.classList.add(n),""!=a&&r.setAttribute("style",a)}},{key:"renderForm",value:function(e){var t=this;this.empty(e),this.renderTarget=e;var a=C.data.prepData,o=document.getElementsByClassName("formeo-render").length,r=this.prepareStageNavigation(a.stages,e),i=!0,l=Object.values(a.stages).map((function(e){var o=e.rows,r=n(e,["rows"]);return o=o.map((function(e){var o=a.rows[e],r=o.columns,i=n(o,["columns"]),l=r.map((function(e){var n=t.processColumnConfig(a.columns[e]),o=n.fields.map((function(e){return a.fields[e]}));return n.tag="div",n.content=o,n}));i.tag="div",i.content=[l];var s=(0,k.clone)(i);if(i.config.inputGroup){var c={tag:"button",className:"remove-input-group",content:A.icon("remove"),action:{mouseover:function(e){e.target.parentElement.classList.add("will-remove")},mouseleave:function(e){e.target.parentElement.classList.remove("will-remove")},click:function(e){var t=e.target.parentElement;1<t.parentElement.getElementsByClassName("f-input-group").length?A.remove(t):console.log("Need at least 1 group")}}};s.content.unshift(c);var u={tag:"div",id:(0,k.uuid)(),className:"f-input-group-wrap"};s.attrs.className&&("string"==typeof s.attrs.className?s.attrs.className+=" f-input-group":s.attrs.className.push("f-input-group"));var d={tag:"button",attrs:{className:"add-input-group btn pull-right",type:"button"},content:"Add +",action:{click:function(e){var t=e.target.parentElement,n=A.create(s);t.insertBefore(n,t.lastChild)}}};i.content.unshift(c),u.content=[s,d],i=u}return i})),r.tag="div",r.content=o,r.className="f-stage",r.title="",i?(i=!1,r.className+=" active"):r.className+=" d-none",r}));if(e.appendChild(this.create({tag:"div",id:"formeo-rendered-"+o,className:"formeo-render formeo",content:l})),null!==r)e.append(this.create(r.navigation)),e.prepend(this.create(r.steps));else{var s={tag:"div",className:["form-submit",this.getSubmitButtonPosition()],content:[A.getFormSubmitButton()]};e.append(this.create(s))}L.default.applyConditions(C.formData.rows),A.processFormSettings(e),A.processPageSettings(e),e.prepend(this.create({tag:"h2",content:document.getElementById("id_title").value}))}},{key:"clearStep",value:function(){this.clearStage(A.activeStage)}},{key:"clearAllSteps",value:function(){var e=this;this.stages.forEach((function(t){return e.clearStage(t.stage)}))}},{key:"clearForm",value:function(e){A.clearStep(e);var t=document.getElementById("efb-cont-form-builder");t.querySelectorAll(".stage-wrap:not(.active)").forEach((function(e){var n=t.querySelector('.prop-remove[id="remove-stage-'+e.id+'"]');A.removeStage(n,e.id)}))}},{key:"clearStage",value:function(e){e.classList.add("removing-all-fields"),E.default.slideUp(e,600,(function(){A.empty(e),e.classList.remove("removing-all-fields"),C.data.save(),A.emptyClass(e),E.default.slideDown(e,300,(function(){e.style.height="100%"}))}))}},{key:"addRow",value:function(e,t){var n=new y.default(t),a=e?this.stages.get(e).stage:this.activeStage;return a.appendChild(n),C.data.saveRowOrder(a),this.emptyClass(a),m.default.formeoUpdated=new CustomEvent("formeoUpdated",{data:{updateType:"added",changed:"row",oldValue:void 0,newValue:C.formData.rows.get(n.id)}}),document.dispatchEvent(m.default.formeoUpdated),n}},{key:"addColumn",value:function(e,t){var n=new v.default(t),a=this.rows.get(e).row;return a.appendChild(n),C.data.saveColumnOrder(a),this.emptyClass(a),m.default.formeoUpdated=new CustomEvent("formeoUpdated",{data:{updateType:"added",changed:"column",oldValue:void 0,newValue:C.formData.columns.get(n.id)}}),document.dispatchEvent(m.default.formeoUpdated),n}},{key:"toggleSortable",value:function(e,t){var n=e.fType;if(n){var a=e.parentElement.fType,o=A[n].get(e.id).sortable;void 0===t&&(t=!o.option("disabled")),o.option("disabled",t),a&&p.default.inArray(a,["rows","columns","stages"])&&this.toggleSortable(e.parentElement,t)}}},{key:"addField",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=void 0;if("clone"==n?a=new S.default(t,n):(a=C.formData.fields.get(t)||(0,k.clone)(C.registeredFields[t]),a=p.default.get(a,"config.composite")?(0,D.addCompositeFields)(e,a):new S.default(t,n)),e){var o=this.columns.get(e).column;o.appendChild(a),C.data.saveFieldOrder(o),this.emptyClass(o)}return m.default.formeoUpdated=new CustomEvent("formeoUpdated",{data:{updateType:"add",changed:"field",oldValue:void 0,newValue:C.formData.fields.get(a.id)}}),document.dispatchEvent(m.default.formeoUpdated),a}},{key:"toggleFormDeleteAction",value:function(){if(this.container){var e=this.container.querySelector(".item-delete-form"),t=0==C.formData.fields.size&&1==C.formData.stages.size;e&&(1==t?(e.classList.add("d-none"),e.parentElement.parentElement.classList.add("hide-delete")):(e.classList.remove("d-none"),e.parentElement.parentElement.classList.remove("hide-delete")))}}},{key:"toggleImportButton",value:function(){var e=document.querySelector(".formeo-import-form");e&&(1==C.formData.stages.size&&0==C.formData.fields.size?e.classList.remove("d-none"):e.classList.add("d-none"))}},{key:"emptyClass",value:function(e){var t=e.fType;if(t){var n=new Map;n.set("stages","rows"),n.set("rows","columns"),n.set("columns","fields"),0==e.getElementsByClassName("stage-"+n.get(t)).length?e.classList.add("empty-"+t):e.classList.remove("empty-"+t),"stages"==t&&this.toggleFormDeleteAction()}}},{key:"h",value:function(e,t,n){return this.create({tag:e,attrs:t,content:n})}},{key:"insertRule",value:function(e){for(var t=void 0,n=this.styleSheet,a=n.cssRules.length,o=0,r=e.length;o<r;o++){var i=1,l=e[o],s=e[o][0],c="";"[object Array]"===Object.prototype.toString.call(l[1][0])&&(l=l[1],i=0);for(var u=l.length;i<u;i++){var d=l[i],f=d[2]?" !important":"";c+=d[0]+":"+d[1]+f+";"}t=n.insertRule(s+" { "+c+" }",a)}return t}},{key:"checkSingle",value:function(){D.defaultElements.forEach((function(e){if(p.default.get(e,"config.single")){var t=!0;C.formData.fields.forEach((function(n){n.meta.group==e.meta.group&&n.meta.id==e.meta.id&&(t=!1)})),1==t?(0,k.showControl)(e.meta.id+"-control"):(0,k.hideControl)(e.meta.id+"-control")}}))}},{key:"proWarning",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=window.M,n={tag:"div",content:e=(0,k.getString)("efb-template-inactive-license",e)};n=A.create(n),A.multiActions("warning",(0,k.getString)("hey-wait"),n,[{title:(0,k.getString)("activatelicense"),type:"success",action:function(){window.location.href=t.cfg.wwwroot+"/admin/settings.php?section=local_edwiserform&activetab=local_edwiserform_license_status"}},{title:(0,k.getString)("later"),type:"warning"}])}},{key:"modalContainer",value:function(e,t,n){return document.addEventListener("keyup",n),{tag:"div",id:e,attrs:{className:"efb-modal fade",role:"dialog","aria-hidden":!0},content:[{tag:"div",attrs:{className:"efb-modal-dialog",role:"document"},content:[{tag:"div",className:"efb-modal-content",content:t}],action:{keyup:n}}]}}},{key:"modalHeader",value:function(e,t,n,a){var o=this,r={click:function(){o.removeModal(e,a)}};return{tag:"div",className:"efb-modal-header bg-"+n,content:[{tag:"h4",attrs:{className:"efb-modal-title text-white",id:"modal-"+e},content:t},{tag:"button",attrs:{type:"button",className:"close efb-modal-close text-white","data-dismiss":e,"aria-label":(0,k.getString)("close")},content:[{tag:"span",attrs:{"aria-hidden":!0},content:"x",action:r}],action:r}]}}},{key:"addModal",value:function(e){e=A.create(e),document.querySelector("body").appendChild(e),setTimeout((function(){e.classList.toggle("show");var t=new CustomEvent("focus",{target:e});e.dispatchEvent(t)}),150)}},{key:"removeModal",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=document.getElementById(e);n&&(n.classList.remove("show"),setTimeout((function(){n.remove(),t&&document.removeEventListener("keyup",t)}),150))}},{key:"toaster",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2e3,n=(0,k.uuid)(),a=this.create({tag:"div",attrs:{id:n,className:"efb-toaster toaster-container"},content:[{tag:"lable",className:"toaster-message",content:e}]});document.querySelector("body").appendChild(a),document.getElementById(n).classList.add("show"),setTimeout((function(){document.getElementById(n).classList.add("fade"),setTimeout((function(){document.getElementById(n).classList.remove("fade"),setTimeout((function(){document.getElementById(n).remove()}),t)}),t)}))}},{key:"loading",value:function(){this.addModal({tag:"div",id:"efb-modal-loading",attrs:{className:"efb-modal fade",role:"dialog","aria-hidden":!0},content:{tag:"div",className:"efb-modal-loader"}})}},{key:"loadingClose",value:function(){this.removeModal("efb-modal-loading")}},{key:"alert",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=this,o=(0,k.uuid)(),r=function e(t){27==t.keyCode&&(null!==n&&n(),a.removeModal(o,e))},i=(0,k.getString)(e),l={tag:"div",className:"efb-modal-footer",content:[{tag:"button",attrs:{className:"btn btn-success",type:"button"},content:(0,k.getString)("ok"),action:{click:function(){a.removeModal(o,r),null!==n&&n()},keyup:r}}]},s=a.modalContainer(o,[a.modalHeader(o,i,e,r),{tag:"div",className:"efb-modal-body",content:[{tag:"h5",content:t}]},l],r);a.addModal(s)}},{key:"multiActions",value:function(e,t,n,a){var o=this,r=(0,k.uuid)(),i=function e(t){27==t.keyCode&&o.removeModal(r,e)},l={tag:"div",className:"efb-modal-footer",content:[]};a.forEach((function(e){l.content.push({tag:"button",attrs:{className:"btn btn-"+e.type,type:"button"},content:e.title,action:{click:function(t){if(e.action){var n=e.action(t);if("boolean"==typeof n&&0==n)return}o.removeModal(r,i)}}})}));var s=o.modalContainer(r,[o.modalHeader(r,t,e,i),{tag:"div",className:"efb-modal-body",content:[{tag:"h5",content:n}]},l],i);o.addModal(s)}},{key:"confirm",value:function(e,t,n,a){var o=this,r=this,i=(0,k.uuid)(),l=function(){a(),r.removeModal(i,s)},s=function e(t){13==t.keyCode?(l(),o.onkeyup=null):27==t.keyCode&&(r.removeModal(i,e),o.onkeyup=null)},c={tag:"div",className:"efb-modal-footer",content:[{tag:"button",attrs:{className:"btn btn-success",type:"button"},content:(0,k.getString)("proceed"),action:{click:l}},{tag:"button",attrs:{className:"btn btn-danger",type:"button"},content:(0,k.getString)("cancel"),action:{click:function(){r.removeModal(i,s)}}}]},u=r.modalContainer(i,[r.modalHeader(i,t,e,s),{tag:"div",className:"efb-modal-body",content:[{tag:"h5",content:n}]},c],s);r.addModal(u)}},{key:"addAttributePrompt",value:function(e,t,n){var a=this,o=(0,k.uuid)(),r=!1,i=function(){var e=document.getElementById("attr-"+o).value,t=document.getElementById("value-"+o).value;a.removeModal(o,l),e&&!r&&(r=!0,n(e,t))},l=function e(t){13==t.keyCode?i():27==t.keyCode&&a.removeModal(o,e)},s={tag:"div",className:"efb-modal-body",content:[{tag:"div",content:(0,k.getString)("attribute-help")},{tag:"input",attrs:{id:"attr-"+o,className:"form-control",type:"text"},config:{label:(0,k.getString)("attribute")},action:{keyup:l}},{tag:"input",attrs:{id:"value-"+o,className:"form-control",type:"text"},config:{label:(0,k.getString)("value")},action:{keyup:l}}]},c={tag:"div",className:"efb-modal-footer",content:[{tag:"button",attrs:{className:"btn btn-success",type:"button"},content:(0,k.getString)("proceed"),action:{click:i}},{tag:"button",attrs:{className:"btn btn-danger",type:"button"},content:(0,k.getString)("cancel"),action:{click:function(){a.removeModal(o,l)}}}]},u=a.modalContainer(o,[a.modalHeader(o,t,e,l),s,c],l);a.addModal(u)}},{key:"setConfig",set:function(e){var t=this,n=this,a=n.icon,o={tag:"button",content:[],attrs:{className:["btn"],type:"button"}},r=p.default.merge(Object.assign({},o),{content:[a("move"),a("handle")],attrs:{className:["btn-default","item-handle"]},meta:{id:"handle"}}),i=p.default.merge(Object.assign({},o),{content:a("edit"),attrs:{className:["btn-primary","item-edit-toggle"]},meta:{id:"edit"},action:{click:function(e){var n=(0,k.closestFtype)(e.target),a=n.fType,o="editing-"+(a=a.replace(/s$/,"")),r=n.querySelector("."+a+"-edit");E.default.slideToggle(r,666),"field"===a&&(E.default.slideToggle(r.nextSibling,666),n.parentElement.classList.toggle("column-"+o)),n.classList.toggle(o),"row"===a&&t.checkRecaptcha(n,n.classList.contains(o))}}}),l=p.default.merge(Object.assign({},o),{content:a("remove"),attrs:{className:["btn-danger","item-remove"]},meta:{id:"remove"},action:{click:function(e){var t=(0,k.closestFtype)(e.target);n.canRemoveElement(t)&&E.default.slideUp(t,666,(function(){n.removeEmpty(t),n.checkSingle()}))}}}),s=p.default.merge(Object.assign({},o),{content:a("copy"),attrs:{className:["btn-warning","item-clone"]},meta:{id:"clone"},action:{click:function(e){n.clone((0,k.closestFtype)(e.target)),C.data.save()}}}),c={rows:{actionButtons:{buttons:[(0,k.addTitle)(r,"row-move"),(0,k.addTitle)(i,"row-edit"),(0,k.addTitle)(s,"row-clone"),(0,k.addTitle)(l,"row-remove")],order:[],disabled:[]}},columns:{actionButtons:{buttons:[(0,k.addTitle)(r,"column-move"),(0,k.addTitle)(s,"column-clone"),(0,k.addTitle)(l,"column-remove")],order:[],disabled:[]}},fields:{actionButtons:{buttons:[(0,k.addTitle)(r,"field-move"),(0,k.addTitle)(i,"field-edit"),(0,k.addTitle)(s,"field-clone"),(0,k.addTitle)(l,"field-remove")],order:[],disabled:[]}}};c.rows.actionButtons.buttons[0].content=[a("move-vertical"),a("handle")],c.columns.actionButtons.buttons[0].content=[a("move"),a("handle")];var u=p.default.merge(c,e);return Object.keys(u).forEach((function(e){if(u[e].actionButtons){var t=u[e].actionButtons,n=t.disabled,a=t.buttons;t.buttons=p.default.orderObjectsBy(a,t.order,"meta.id"),t.buttons=t.buttons.filter((function(e){var t=p.default.get(e,"meta.id");return!p.default.inArray(t,n)}))}})),u.dir&&(this.dir=u.dir),this.config=u,this.config}}]),e}(),A=new _;t.default=A},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=t.showControl=t.hideControl=t.getString=t.clicked=t.cleanObj=t.numberBetween=t.numToPercent=t.addTitle=t.strip=t.clone=t.uuid=t.strMapToObj=t.objToStrMap=t.unique=t.ucfirst=t.elementTagType=t.closestFtype=t.closest=t.remove=t.match=t.assign=t.isObject=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=a(n(19)),i=(a(n(20)),t.isObject=function(e){return"object"===(void 0===e||void 0===e?"undefined":o(e))&&null!==e}),l=(t.assign=Object.assign||function(e){for(var t=void 0,n=void 0,a=void 0,o=arguments.length,r=Array(1<o?o-1:0),l=1;l<o;l++)r[l-1]=arguments[l];for(t=r.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=r[a];return i(e)&&0<n.length&&n.forEach((function(t){i(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e},t.match=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];if(!t)return console.warn("utils.match missing argument 2."),!1;var n=/[|\\{}()[\]^*$+?.]/g,a="string"==typeof t?[t]:t,o=!0;return(a=a.map((function(e){return"*"===e?"":e.replace(n,"\\$&")}))).length&&(o=!e.match(new RegExp(a.join("|"),"i"))),o},t.remove=function(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)},t.closest=function(e,t){for(var n=t.replace(".","");(e=e.parentElement)&&!e.classList.contains(n););return e},t.closestFtype=function(e){for(;(e=e.parentElement)&&!e.fType;);return e},t.elementTagType=function(e){var t={tag:e.tagName};return"INPUT"==e.tagName&&(t.type=e.type),t},t.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.unique=function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))},t.objToStrMap=function(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t},t.strMapToObj=function(e){var t=Object.create(null);return e.forEach((function(e,n){t[n]=e})),t},t.uuid=function(e){var t;if(e){var n=e.attrs;t=(void 0===n?{}:n).id||e.id||(0,r.default)(),e.id=t}else t=(0,r.default)();return t},t.clone=function e(t){var n;if(null===t||"object"!==(void 0===t?"undefined":o(t)))return t;if(t instanceof Date)return(n=new Date).setTime(t.getTime()),n;if(t instanceof Array){n=[];for(var a=0,r=t.length;a<r;a++)n[a]=e(t[a]);return n}if(t instanceof Object){for(var i in n={},t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e(t[i]));return n}return t}),s=(t.strip=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},t.addTitle=function(e,t){return(e=l(e)).attrs.title=c(t),e},t.numToPercent=function(e){return e.toString()+"%"},t.numberBetween=function(e,t,n){return e>t&&e<n}),c=(t.cleanObj=function(e){var t=Object.assign({},e);return Object.keys(e).forEach((function(n){"string"==typeof e[n]?t[n]=n:"boolean"==typeof e[n]&&(t[n]=!1)})),t},t.clicked=function(e,t,n,a){var o=n.x-5,r=n.x+5,i=n.y-5,l=n.y+5,c=s(e,o,r),u=s(t,i,l);return c&&u&&2!==a},t.getString=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=window.M,a=null===t?n.util.get_string(e,"local_edwiserform"):n.util.get_string(e,"local_edwiserform",t);return a=="[["+e+",local_edwiserform]]"?(e=e.replace("-"," "),-1!=a.indexOf(".")&&(e=(e=e.split(".")).slice(e.length-1)[0]),e=e.charAt(0).toUpperCase()+e.slice(1)):a});t.hideControl=function(e){var t=document.querySelector("."+e),n=t.parentElement.parentElement,a=t.parentElement,o=a.clientHeight+"px";if(t.classList.add("disable-control"),!n.classList.contains("collapsed-controls")){a.style.height="auto";var r=a.clientHeight+"px";a.style.height=o,setTimeout((function(){a.style.height=r}),0)}},t.showControl=function(e){var t=document.querySelector("."+e),n=t.parentElement.parentElement,a=t.parentElement,o=a.clientHeight+"px";if(t.classList.remove("disable-control"),!n.classList.contains("collapsed-controls")){a.style.height="auto";var r=a.clientHeight+"px";a.style.height=o,setTimeout((function(){a.style.height=r}),0)}};(t.memoize=function e(t,n){if("function"!=typeof t||n&&"function"!=typeof n)throw new TypeError("memoize: First argument must be a function");var a=function e(){for(var a=arguments.length,o=Array(a),r=0;r<a;r++)o[r]=arguments[r];var i=n?n.apply(e,o):o[0],l=e.cache;if(l.has(i))return l.get(i);var s=t.apply(e,o);return e.cache=l.set(i,s),s};return a.cache=new e.Cache,a}).Cache=Map},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=n(1),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,l=/\\(\\)?/g,s=function(e){var t=[];return Array.isArray(e)?t=e:e.replace(i,(function(e,n,a,o){var r;r=a?o.replace(l,"$1"):n||e,t.push(r)})),t},c=function(){var e={},t=void 0,n=document.createElement("div");return function(a){return a.replace(/([&][^&; ]+[;])/g,(function(a){return(t=e[a])||(n.innerHTML=a,t=n.childNodes[0]?e[a]=n.childNodes[0].nodeValue:""),t}))}}(),u={hyphenCase:function(e){return(e=e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))).replace(/\s/g,"-").replace(/^-+/g,"")},safeAttrName:function(e){return{className:"class"}[e]||u.hyphenCase(e)},ajax:function(e,t){return new window.Promise((function(n,a){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onload=function(){200<=this.status&&300>this.status?(t(o),n(o.response)):a({status:this.status,statusText:o.statusText})},o.onerror=function(){a({status:this.status,statusText:o.statusText})},o.send()}))},insertIcons:function(e){var t="formeo-sprite",n=o.default.create({tag:"div",content:e.responseText,id:t});n.style.display="none";var a=document.getElementById(t);a?a.parentElement.replaceChild(n,a):document.body.insertBefore(n,document.body.childNodes[0])},insertStyle:function(e){var t=o.default.create({tag:"style",content:e.responseText});document.head.appendChild(t)},capitalize:function(e){return e.replace(/\b\w/g,(function(e){return e.toUpperCase()}))},inArray:function(e,t){return-1!==t.indexOf(e)},forEach:function(e,t,n){for(var a=0;a<e.length;a++)t.call(n,e[a],a)},copyObj:function(e){return window.JSON.parse(window.JSON.stringify(e))},map:function(e,t){var n=[];return u.forEach(e,(function(e,a){return n.push(t(a))})),n},subtract:function(e,t){return t.filter((function(e){return-1===this.indexOf(e)}),e)},indexOfNode:function(e,t){var n=t||e.parentElement;return Array.prototype.slice.call(n.childNodes).indexOf(e)},isInt:function(e){return+e===e&&0==e%1},get:function(e,t){for(var n=0,a=(t=s(t)).length;null!==e&&n<a;){if(!Object.prototype.hasOwnProperty.call(e,t[n]))return;e=e[t[n++]]}return n&&n===a?e:void 0},set:function(e,t,n,o){for(var r=-1,i=(t=s(t)).length,l=e;null!==l&&++r<i;){var c=t[r];if("object"===(void 0===l?"undefined":a(l))){var u=n;if(r!=i-1){var d=l[c];void 0===(u=o?o(d,c,l):void 0)&&(u=null===d?[]:d)}hasOwnProperty.call(l,c)&&l[c]===u&&(void 0!==u||c in l)||(l[c]=u)}l=l[c]}return e},merge:function(e,t){var n=Object.assign({},e,t);for(var o in t)Object.prototype.hasOwnProperty.call(n,o)&&(n[o]=Array.isArray(t[o])?e&&Array.isArray(e[o])?e[o].concat(t[o]):t[o]:"object"===a(t[o])?u.merge(e[o],t[o]):t[o]);return n},orderObjectsBy:function(e,t,n){var a=(0,r.unique)(t).map((function(t){return e.filter((function(e){return u.get(e,n)===t}))[0]})).filter(Boolean).concat(e);return(0,r.unique)(a)},toggleElementsByStr:function(e,t){var n=[];return u.forEach(e,(function(e){-1===e.textContent.toLowerCase().indexOf(t.toLowerCase())?e.style.display="none":(e.style.display="block",n.push(e))})),n},isFireFoxEdge:function(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")||-1<navigator.userAgent.toLowerCase().indexOf("trident")},stripHtml:function(e){var t=document.createElement("div");return t.innerHTML=c(e),t.textContent||t.innerText||""},isHtml:function(e){var t=document.createElement("div");t.innerHTML=c(e);for(var n=t.childNodes,a=n.length;a--;)if(1==n[a].nodeType)return!0;return!1}};t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registeredFields=t.formData=t.data=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=a(n(6)),i=a(n(2)),l=a(n(0)),s=a(n(12)),c=n(1),u={},d=void 0,f={init:function(e,n){var a={id:(0,c.uuid)(),settings:new Map,stages:new Map,rows:new Map,columns:new Map,fields:new Map};u.opts=e;var o=function(e){"string"==typeof e&&(e=window.JSON.parse(e)),e.settings=(0,c.objToStrMap)(e.settings),e.stages=(0,c.objToStrMap)(e.stages),e.rows=(0,c.objToStrMap)(e.rows),e.columns=(0,c.objToStrMap)(e.columns),e.fields=(0,c.objToStrMap)(e.fields),t.formData=d=Object.assign({},a,e)};if(""===n)t.formData=d=!1;else if(null!==n)o(n);else if(window.localStorage&&u.opts.localStorage){var r=window.localStorage.getItem("formData");r&&o(r)}return d||(t.formData=d=a),d},replaceFormData:function(e){t.formData=d=e},saveStageOrder:function(e){var t={},n=void 0;e.forEach((function(e){e=e.querySelector("input"),n=(n=e.id).replace("title-for-",""),t[n]=d.stages.get(n)})),t=(0,c.objToStrMap)(t),d.stages=t,l.default.reorderTabButtons(),f.save()},saveColumnOrder:function(e){var t=e.getElementsByClassName("stage-columns"),n=i.default.map(t,(function(e){return t[e].id}));return d.rows.get(e.id).columns=n,n},saveFieldOrder:function(e){var t=e.getElementsByClassName("stage-fields"),n=i.default.map(t,(function(e){return t[e].id}));return d.columns.get(e.id).fields=n,n},refreshStageSelectList:function(){var e=document.getElementById("stages");document.getElementsByClassName("stages-list")[0].classList.remove("d-none"),e.options.length=0,d.stages.forEach((function(t,n){var a=document.createElement("option");a.label=t.title,a.value=n,e.add(a)}))},addStage:function(){var e=new s.default("",""),t=e.childNodes[0].id;return document.getElementsByClassName("formeo-editor")[0].querySelector(".form-container").append(e),f.save(),t},updateStageTitle:function(e,t){var n=d.stages.get(e);n.title=t,d.stages.set(e,n),f.save()},saveConditionalLogics:function(e){var t=e.row.id,n=d.rows.get(t),a=n.conditions,o=void 0;a.length>e.conditionIndex&&(o=a[e.conditionIndex]);var r={source:0,value:1,operator:2},i=function(e,t){var n=e.childNodes[t].childNodes,a=[];return 0<n.length&&n.forEach((function(e){a.push({label:e.label,value:e.value,selected:e.selected})})),a};switch(e.type){case"add":a.push({tag:"div",className:"condition-inputs",content:[{tag:"select",className:"condition-source condition-input",options:i(e.condition,r.source)},{tag:"select",className:"condition-value condition-input",options:i(e.condition,r.value)},{tag:"select",className:"condition-operator condition-input",options:i(e.condition,r.operator)}]});break;case"delete":a.splice(e.conditionIndex,1);break;case"source":case"value":case"operator":o.content[r[e.type]].options=i(e.condition,r[e.type]),a[e.conditionIndex]=o}n.conditions=a,d.rows.set(t,n),f.save()},saveRowOrder:function(e){if(e||(e=l.default.activeStage),void 0===d.stages.get(e.id))return{};var t=d.stages.get(e.id).rows.slice(),n=e.getElementsByClassName("stage-rows"),a=i.default.map(n,(function(e){return n[e].id}));return d.stages.get(e.id).rows=a,new CustomEvent("formeoUpdated",{data:{updateType:"sort",changed:"rows",oldValue:t,newValue:a}}),document.dispatchEvent(r.default.formeoUpdated),a},saveOptionOrder:function(e){var t=e.getElementsByClassName("prop-wrap"),n=i.default.map(t,(function(e){return t[e].propData}));return d.fields.get(e.fieldID)[e.editGroup]=n,n},saveOrder:function(e,t){return{row:f.saveRowOrder,column:f.saveColumnOrder,field:f.saveFieldOrder,options:f.saveOptionOrder}[e](t)},saveType:function(e,t){var n={settings:function(){var e=d.stages.settings;return d.settings=[],i.default.forEach(e,(function(e,t){d.rows[e]=i.default.clone(d.rows[t]),d.rows[e]=Object.assign({},d.rows[t]),d.rows[e].columns=n.columns(t)})),d.settings},stages:function(){f.saveRowOrder()},rows:function(){return d.rows},columns:function(){return d.columns},fields:function(){return d.fields},field:function(e){return d.fields.get(e)},attrs:function(e){var t=d.fields.get(e.fieldID).attrs;return r.default.formeoUpdated=new CustomEvent("formeoUpdated",{data:{changed:"field.attrs",updateType:"update",attrValues:t}}),document.dispatchEvent(r.default.formeoUpdated),t},options:function(e){var t=d.fields.get(e.fieldID).options,n=f.saveOrder("options",e);return r.default.formeoUpdated=new CustomEvent("formeoUpdated",{data:{changed:"field.options",updateType:"sort",oldValue:t,newValue:n}}),document.dispatchEvent(r.default.formeoUpdated),n}};return n[e](t)},empty:function(e,t){var n={},a={stages:function(e){e||(e=l.default.activeStage.id);var t=d.stages.get(e),o=t.rows;n.rows=o.map((function(e){return a.rows(e),d.rows.delete(e),e})),t.rows=[]},rows:function(e){var t=d.rows.get(e);if(t){var o=t.columns;n.columns=o.map((function(e){return a.columns(e),d.columns.delete(e),e})),o=[]}},columns:function(e){var t=d.columns.get(e);if(t){var a=t.fields;n.fields=a.map((function(e){return d.fields.delete(e),e})),a=[]}},fields:function(e){var t=l.default.fields.get(e);if(t){t=t.field;var n=d.columns.get(t.parentElement.id),a=n.fields.slice();(0,c.remove)(n.fields,e),r.default.formeoUpdated=new CustomEvent("formeoUpdated",{data:{updateType:"removed",changed:"column.fields",oldValue:a,newValue:n.fields}}),document.dispatchEvent(r.default.formeoUpdated)}}};return a[e](t),n},saveThrottle:!1,saveThrottled:!1,save:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"stages",t=arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];n&&(f.saveThrottle=n);var a=function(){f.saveType(e,t);var n=window.localStorage;if(n&&u.opts.localStorage)try{n.setItem("formData",f.json)}catch(e){var a=new CustomEvent("confirmClearStorage",{detail:{confirmationMessage:(0,c.getString)("clearstoragemessage"),clearStorageAction:function(){n.clear(),n.setItem("formData",f.json)},clearStorageManualAction:function(){window.open("https://www.google.com/search?q=how+to+clear+browser+local+storage")}}});document.dispatchEvent(a)}return r.default.formeoSaved=new CustomEvent("formeoSaved",{detail:{formData:f.js}}),document.dispatchEvent(r.default.formeoSaved),d};return f.saveThrottle?f.saveThrottled=!0:(a(),f.saveThrottle=!0,setTimeout((function(){f.saveThrottled&&(a(),f.saveThrottled=!1),f.saveThrottle=!1}),500)),d},reset:function(){var e=window.localStorage;e&&u.opts.localStorage&&e.setItem("formData","")},get js(){var e={};return Object.keys(d).forEach((function(t){e[t]="string"==typeof d[t]?d[t]:(0,c.strMapToObj)(d[t])})),e},get prepData(){var e=f.js;return Object.keys(e).forEach((function(t){"object"!=o(e[t])||Object.keys(e[t]).forEach((function(n){var a=e[t][n];a.action&&Object.keys(a.action).forEach((function(e){a.action[e]=a.action[e].toString()}))}))})),e},get json(){var e=f.prepData;return window.JSON.stringify(e,null,"\t")}};t.data=f,t.formData=d,t.registeredFields={}},function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){return(r=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function i(e){for(var t=1;t<arguments.length;t++){var n=null==arguments[t]?{}:arguments[t],a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){o(e,t,n[t])}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],!(0<=t.indexOf(n))&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}function u(e,t,n){e.addEventListener(t,n,!De&&_e)}function d(e,t,n){e.removeEventListener(t,n,!De&&_e)}function f(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function g(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function p(e,t,n,a){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&f(e,t):f(e,t))||a&&e===n)return e;if(e===n)break}while(e=g(e))}return null}function m(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(Ie," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(Ie," ")}}function v(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=n+("string"==typeof n?"":"px")}}function h(e,t){var n="";if("string"==typeof e)n=e;else do{var a=v(e,"transform");a&&"none"!==a&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function y(e,t,n){if(e){var a=e.getElementsByTagName(t),o=0,r=a.length;if(n)for(;o<r;o++)n(a[o],o);return a}return[]}function b(){var e=document.scrollingElement;return e||document.documentElement}function w(e,t,n,a,o){if(e.getBoundingClientRect||e===window){var r,i,l,s,c,u,d;if(e!==window&&e!==b()?(i=(r=e.getBoundingClientRect()).top,l=r.left,s=r.bottom,c=r.right,u=r.height,d=r.width):(i=0,l=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!De))do{if(o&&o.getBoundingClientRect&&("none"!==v(o,"transform")||n&&"static"!==v(o,"position"))){var f=o.getBoundingClientRect();i-=f.top+parseInt(v(o,"border-top-width")),l-=f.left+parseInt(v(o,"border-left-width")),s=i+r.height,c=l+r.width;break}}while(o=o.parentNode);if(a&&e!==window){var g=h(o||e),p=g&&g.a,m=g&&g.d;g&&(s=(i/=m)+(u/=m),c=(l/=p)+(d/=p))}return{top:i,left:l,bottom:s,right:c,width:d,height:u}}}function S(e,t,n){for(var a=D(e,!0),o=w(e)[t];a;){var r=w(a)[n];if(!("top"===n||"left"===n?o>=r:o<=r))return a;if(a===b())break;a=D(a,!1)}return!1}function C(e,t,n){for(var a=0,o=0,r=e.children;o<r.length;){if("none"!==r[o].style.display&&r[o]!==F.ghost&&r[o]!==F.dragged&&p(r[o],n.draggable,e,!1)){if(a===t)return r[o];a++}o++}return null}function E(e,t){for(var n=e.lastElementChild;n&&(n===F.ghost||"none"===v(n,"display")||t&&!f(n,t));)n=n.previousElementSibling;return n||null}function k(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==F.clone&&(!t||f(e,t))&&n++;return n}function N(e){var t=0,n=0,a=b();if(e)do{var o=h(e),r=o.a,i=o.d;t+=e.scrollLeft*r,n+=e.scrollTop*i}while(e!==a&&(e=e.parentNode));return[t,n]}function D(e,t){if(!e||!e.getBoundingClientRect)return b();var n=e,a=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=v(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return b();if(a||t)return n;a=!0}}}while(n=n.parentNode);return b()}function T(e,t){var n=Math.round;return n(e.top)===n(t.top)&&n(e.left)===n(t.left)&&n(e.height)===n(t.height)&&n(e.width)===n(t.width)}function x(e,t){return function(){if(!ee){var n=arguments,a=this;1===n.length?e.call(a,n[0]):e.apply(a,n),ee=setTimeout((function(){ee=void 0}),t)}}}function O(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function A(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function L(e,t){v(e,"position","absolute"),v(e,"top",t.top),v(e,"left",t.left),v(e,"width",t.width),v(e,"height",t.height)}function _(e){v(e,"position",""),v(e,"top",""),v(e,"left",""),v(e,"width",""),v(e,"height","")}function I(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==v(e,"display")&&e!==F.ghost){t.push({target:e,rect:w(e)});var n=i({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=h(e,!0);a&&(n.top-=a.f,n.left-=a.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return+n;return-1}(t,{target:e}),1)},animateAll:function(n){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,r=0;t.forEach((function(e){var t=0,n=e.target,i=n.fromRect,l=w(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=h(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&T(s,l)&&!T(i,l)&&(u.top-l.top)/(u.left-l.left)==(i.top-l.top)/(i.left-l.left)&&(t=function(e,t,n,a){var o=Math.sqrt,r=Math.pow;return o(r(t.top-e.top,2)+r(t.left-e.left,2))/o(r(t.top-n.top,2)+r(t.left-n.left,2))*a.animation}(u,s,c,a.options)),T(l,i)||(n.prevFromRect=i,n.prevToRect=l,!t&&(t=a.options.animation),a.animate(n,u,l,t)),t&&(o=!0,r=Q(r,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),r):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,a){if(a){v(e,"transition",""),v(e,"transform","");var o=h(this.el),r=o&&o.a,i=o&&o.d,l=(t.left-n.left)/(r||1),s=(t.top-n.top)/(i||1);e.animatingX=!!l,e.animatingY=!!s,v(e,"transform","translate3d("+l+"px,"+s+"px,0)"),function(e){e.offsetWidth}(e),v(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),v(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){v(e,"transition",""),v(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}function M(e){var t=e.sortable,n=e.rootEl,a=e.name,o=e.targetEl,r=e.cloneEl,l=e.toEl,s=e.fromEl,c=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,f=e.newDraggableIndex,g=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[Me]){var v,h=t.options,y="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||De||Te?(v=document.createEvent("Event")).initEvent(a,!0,!0):v=new CustomEvent(a,{bubbles:!0,cancelable:!0}),v.to=l||n,v.from=s||n,v.item=o||n,v.clone=r,v.oldIndex=c,v.newIndex=u,v.oldDraggableIndex=d,v.newDraggableIndex=f,v.originalEvent=g,v.pullMode=p?p.lastPutMode:void 0;var b=i({},m,je.getEventProperties(a,t));for(var w in b)v[w]=b[w];n&&n.dispatchEvent(v),h[y]&&h[y].call(t,v)}}function P(e){M(i({putSortable:pe,cloneEl:le,targetEl:te,rootEl:oe,oldIndex:ce,oldDraggableIndex:de,newIndex:ue,newDraggableIndex:fe},e))}function F(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=r({},t),e[Me]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ze(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==F.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var a in je.initializePlugins(this,e,n),n)a in t||(t[a]=n[a]);for(var o in Qe(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&$e,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?u(e,"pointerdown",this._onTapStart):(u(e,"mousedown",this._onTapStart),u(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(u(e,"dragover",this),u(e,"dragenter",this)),We.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),r(this,I())}function j(e,t,n,a,o,r,i,l){var s,c,u=e[Me],d=u.options.onMove;return!window.CustomEvent||De||Te?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=a,s.related=o||t,s.relatedRect=r||w(t),s.willInsertAfter=l,s.originalEvent=i,e.dispatchEvent(s),d&&(c=d.call(u,s,i)),c}function B(e){e.draggable=!1}function q(){Xe=!1}function R(e,t,n,a,o,r,i,l){var s=a?e.clientY:e.clientX,c=a?n.height:n.width,u=a?n.top:n.left,d=a?n.bottom:n.right,f=!1;if(!i)if(l&&ke<c*o){if(!He&&(1===Ee?s>u+c*r/2:s<d-c*r/2)&&(He=!0),He)f=!0;else if(1===Ee?s<u+ke:s>d-ke)return-Ee}else if(s>u+c*(1-o)/2&&s<d-c*(1-o)/2)return function(e){return k(te)<k(e)?1:-1}(t);return(f=f||i)&&(s<u+c*r/2||s>d-c*r/2)?s>u+c/2?1:-1:0}function W(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function H(e){return setTimeout(e,0)}function z(e){return clearTimeout(e)}function U(){ut.forEach((function(e){clearInterval(e.pid)})),ut=[]}function X(){clearInterval(ct)}function G(){}function Y(){}function V(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;pt=t},dragOverValid:function(e){var t=e.completed,n=e.target,a=e.onMove,o=e.activeSortable,r=e.changed,i=e.cancel;if(o.options.swap){var l=this.sortable.el,s=this.options;if(n&&n!==l){var c=pt;!1===a(n)?pt=null:(m(n,s.swapClass,!0),pt=n),c&&c!==pt&&m(c,s.swapClass,!1)}r(),t(!0),i()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,a=e.dragEl,o=n||this.sortable,r=this.options;pt&&m(pt,r.swapClass,!1),pt&&(r.swap||n&&n.options.swap)&&a!==pt&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),function(e,t){var n,a,o=e.parentNode,r=t.parentNode;!o||!r||o.isEqualNode(t)||r.isEqualNode(e)||(n=k(e),a=k(t),o.isEqualNode(r)&&n<a&&a++,o.insertBefore(t,o.children[n]),r.insertBefore(e,r.children[a]))}(a,pt),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){pt=null}},r(e,{pluginName:"swap",eventProperties:function(){return{swapItem:pt}}})}function K(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?u(document,"pointerup",this._deselectMultiDrag):(u(document,"mouseup",this._deselectMultiDrag),u(document,"touchend",this._deselectMultiDrag)),u(document,"keydown",this._checkKeyDown),u(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var a="";wt.length&&vt===e?wt.forEach((function(e,t){a+=(t?", ":"")+e.textContent})):a=n.textContent,t.setData("Text",a)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;ht=t},delayEnded:function(){this.isMultiDrag=~wt.indexOf(ht)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var a=0;a<wt.length;a++)St.push(A(wt[a])),St[a].sortableIndex=wt[a].sortableIndex,St[a].draggable=!1,St[a].style["will-change"]="",m(St[a],this.options.selectedClass,!1),wt[a]===ht&&m(St[a],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,a=e.dispatchSortableEvent,o=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||!wt.length||vt!==t||($(!0,n),a("clone"),o()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,a=e.cancel;this.isMultiDrag&&($(!1,n),St.forEach((function(e){v(e,"display","")})),t(),bt=!1,a())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),a=e.cancel;this.isMultiDrag&&(St.forEach((function(e){v(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),bt=!0,a())},dragStartGlobal:function(e){e.sortable,!this.isMultiDrag&&vt&&vt.multiDrag._deselectMultiDrag(),wt.forEach((function(e){e.sortableIndex=k(e)})),wt=wt.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),kt=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){wt.forEach((function(e){e===ht||v(e,"position","absolute")}));var a=w(ht,!1,!0,!0);wt.forEach((function(e){e===ht||L(e,a)})),Et=!0,Ct=!0}n.animateAll((function(){Et=!1,Ct=!1,t.options.animation&&wt.forEach((function(e){_(e)})),t.options.sort&&J()}))}},dragOver:function(e){var t=e.target,n=e.completed,a=e.cancel;Et&&~wt.indexOf(t)&&(n(!1),a())},revert:function(e){var t=e.fromSortable,n=e.rootEl,a=e.sortable,o=e.dragRect;1<wt.length&&(wt.forEach((function(e){a.addAnimationState({target:e,rect:Et?w(e):o}),_(e),e.fromRect=o,t.removeAnimationState(e)})),Et=!1,function(e,t){wt.forEach((function(n,a){var o=t.children[n.sortableIndex+(e?+a:0)];o?t.insertBefore(n,o):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,a=e.insertion,o=e.activeSortable,r=e.parentEl,i=e.putSortable,l=this.options;if(a){if(n&&o._hideClone(),Ct=!1,l.animation&&1<wt.length&&(Et||!n&&!o.options.sort&&!i)){var s=w(ht,!1,!0,!0);wt.forEach((function(e){e===ht||(L(e,s),r.appendChild(e))})),Et=!0}if(!n)if(Et||J(),1<wt.length){var c=bt;o._showClone(t),o.options.animation&&!bt&&c&&St.forEach((function(e){o.addAnimationState({target:e,rect:yt}),e.fromRect=yt,e.thisAnimationDuration=null}))}else o._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,a=e.activeSortable;if(wt.forEach((function(e){e.thisAnimationDuration=null})),a.options.animation&&!n&&a.multiDrag.isMultiDrag){yt=r({},t);var o=h(ht,!0);yt.top-=o.f,yt.left-=o.e}},dragOverAnimationComplete:function(){Et&&(Et=!1,J())},drop:function(e){var t=e.originalEvent,n=e.rootEl,a=e.parentEl,o=e.sortable,r=e.dispatchSortableEvent,i=e.oldIndex,l=e.putSortable,s=l||this.sortable;if(t){var c=this.options,u=a.children;if(!kt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),m(ht,c.selectedClass,!~wt.indexOf(ht)),~wt.indexOf(ht))wt.splice(wt.indexOf(ht),1),mt=null,M({sortable:o,rootEl:n,name:"deselect",targetEl:ht,originalEvt:t});else{if(wt.push(ht),M({sortable:o,rootEl:n,name:"select",targetEl:ht,originalEvt:t}),t.shiftKey&&mt&&o.el.contains(mt)){var d,f,g=k(mt),p=k(ht);if(~g&&~p&&g!==p)for(p>g?(f=g,d=p):(f=p,d=g+1);f<d;f++)~wt.indexOf(u[f])||(m(u[f],c.selectedClass,!0),wt.push(u[f]),M({sortable:o,rootEl:n,name:"select",targetEl:u[f],originalEvt:t}))}else mt=ht;vt=s}if(kt&&this.isMultiDrag){if((a[Me].options.sort||a!==n)&&1<wt.length){var v=w(ht),h=k(ht,":not(."+this.options.selectedClass+")");if(!Ct&&c.animation&&(ht.thisAnimationDuration=null),s.captureAnimationState(),!Ct&&(c.animation&&(ht.fromRect=v,wt.forEach((function(e){if(e.thisAnimationDuration=null,e!==ht){var t=Et?w(e):v;e.fromRect=t,s.addAnimationState({target:e,rect:t})}}))),J(),wt.forEach((function(e){u[h]?a.insertBefore(e,u[h]):a.appendChild(e),h++})),i===k(ht))){var y=!1;wt.forEach((function(e){e.sortableIndex===k(e)||(y=!0)})),y&&r("update")}wt.forEach((function(e){_(e)})),s.animateAll()}vt=s}(n===a||l&&"clone"!==l.lastPutMode)&&St.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=kt=!1,St.length=0},destroyGlobal:function(){this._deselectMultiDrag(),d(document,"pointerup",this._deselectMultiDrag),d(document,"mouseup",this._deselectMultiDrag),d(document,"touchend",this._deselectMultiDrag),d(document,"keydown",this._checkKeyDown),d(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==kt&&kt||vt!==this.sortable||e&&p(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;wt.length;){var t=wt[0];m(t,this.options.selectedClass,!1),wt.shift(),M({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},r(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[Me];t&&t.options.multiDrag&&!~wt.indexOf(e)&&(vt&&vt!==t&&(vt.multiDrag._deselectMultiDrag(),vt=t),m(e,t.options.selectedClass,!0),wt.push(e))},deselect:function(e){var t=e.parentNode[Me],n=wt.indexOf(e);t&&t.options.multiDrag&&~n&&(m(e,t.options.selectedClass,!1),wt.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return wt.forEach((function(a){var o;t.push({multiDragElement:a,index:a.sortableIndex}),o=Et&&a!==ht?-1:Et?k(a,":not(."+e.options.selectedClass+")"):k(a),n.push({multiDragElement:a,index:o})})),{items:s(wt),clones:[].concat(St),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":1<e.length&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function $(e,t){St.forEach((function(n,a){var o=t.children[n.sortableIndex+(e?+a:0)];o?t.insertBefore(n,o):t.appendChild(n)}))}function J(){wt.forEach((function(e){e===ht||e.parentNode&&e.parentNode.removeChild(e)}))}var Z=Math.abs,Q=Math.max;n.r(t),n.d(t,"MultiDrag",(function(){return K})),n.d(t,"Sortable",(function(){return F})),n.d(t,"Swap",(function(){return V}));var ee,te,ne,ae,oe,re,ie,le,se,ce,ue,de,fe,ge,pe,me,ve,he,ye,be,we,Se,Ce,Ee,ke,Ne,De=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Te=c(/Edge/i),xe=c(/firefox/i),Oe=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),Ae=c(/iP(ad|od|hone)/i),Le=c(/chrome/i)&&c(/android/i),_e={capture:!1,passive:!1},Ie=/\s+/g,Me="Sortable"+(new Date).getTime(),Pe=[],Fe={initializeByDefault:!0},je={mount:function(e){for(var t in Fe)Fe.hasOwnProperty(t)&&!(t in e)&&(e[t]=Fe[t]);Pe.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var o=e+"Global";Pe.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][o]&&t[a.pluginName][o](i({sortable:t},n)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](i({sortable:t},n)))}))},initializePlugins:function(e,t,n){for(var a in Pe.forEach((function(a){var o=a.pluginName;if(e.options[o]||a.initializeByDefault){var i=new a(e,t,e.options);i.sortable=e,i.options=e.options,e[o]=i,r(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(a)){var o=this.modifyOption(e,a,e.options[a]);void 0!==o&&(e.options[a]=o)}},getEventProperties:function(e,t){var n={};return Pe.forEach((function(a){"function"!=typeof a.eventProperties||r(n,a.eventProperties.call(t[a.pluginName],e))})),n},modifyOption:function(e,t,n){var a;return Pe.forEach((function(o){!e[o.pluginName]||o.optionListeners&&"function"==typeof o.optionListeners[t]&&(a=o.optionListeners[t].call(e[o.pluginName],n))})),a}},Be=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,o=l(n,["evt"]);je.pluginEvent.bind(F)(e,t,i({dragEl:te,parentEl:ne,ghostEl:ae,rootEl:oe,nextEl:re,lastDownEl:ie,cloneEl:le,cloneHidden:se,dragStarted:Se,putSortable:pe,activeSortable:F.active,originalEvent:a,oldIndex:ce,oldDraggableIndex:de,newIndex:ue,newDraggableIndex:fe,hideGhostForTarget:et,unhideGhostForTarget:tt,cloneNowHidden:function(){se=!0},cloneNowShown:function(){se=!1},dispatchSortableEvent:function(e){P({sortable:t,name:e,originalEvent:a})}},o))},qe=!1,Re=!1,We=[],He=!1,ze=!1,Ue=[],Xe=!1,Ge=[],Ye="undefined"!=typeof document,Ve=Ae,Ke=Te||De?"cssFloat":"float",$e=Ye&&!Le&&!Ae&&"draggable"in document.createElement("div"),Je=function(){if(Ye){if(De)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ze=function(e,t){var n=v(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=C(e,0,t),r=C(e,1,t),i=o&&v(o),l=r&&v(r),s=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+w(o).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+w(r).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return 1>=n.gridTemplateColumns.split(" ").length?"vertical":"horizontal";if(o&&i.float&&"none"!==i.float){var u="left"===i.float?"left":"right";return!r||"both"!==l.clear&&l.clear!==u?"horizontal":"vertical"}return o&&("block"===i.display||"flex"===i.display||"table"===i.display||"grid"===i.display||s>=a&&"none"===n[Ke]||r&&"none"===n[Ke]&&s+c>a)?"vertical":"horizontal"},Qe=function(e){function t(e,n){return function(a,o,r,i){var l=a.options.group.name&&o.options.group.name&&a.options.group.name===o.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(a,o,r,i),n)(a,o,r,i);var s=(n?a:o).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&-1<e.indexOf(s)}}var n={},o=e.group;o&&"object"==a(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},et=function(){!Je&&ae&&v(ae,"display","none")},tt=function(){!Je&&ae&&v(ae,"display","")};Ye&&document.addEventListener("click",(function(e){if(Re)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Re=!1,!1}),!0);var nt=function(e){if(te){var t=function(e,t){var n;return We.some((function(a){if(!E(a)){var o=w(a),r=a[Me].options.emptyInsertThreshold,i=e>=o.left-r&&e<=o.right+r,l=t>=o.top-r&&t<=o.bottom+r;if(r&&i&&l)return n=a}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Me]._onDragOver(n)}}},at=function(e){te&&te.parentNode[Me]._isOutsideThisEl(e.target)};F.prototype={constructor:F,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Ce=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,te):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,o=a.preventOnFilter,r=e.type,i=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(i||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=a.filter;if(!(function(e){Ge.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&Ge.push(a)}}(n),te||/mousedown|pointerdown/.test(r)&&0!==e.button||a.disabled||s.isContentEditable||(l=p(l,a.draggable,n,!1),l&&l.animated)||ie===l)){if(ce=k(l),de=k(l,a.draggable),"function"==typeof c){if(c.call(this,e,l,this))return P({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),Be("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(a){if(a=p(s,a.trim(),n,!1))return P({sortable:t,rootEl:a,name:"filter",targetEl:l,fromEl:n,toEl:n}),Be("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());a.handle&&!p(s,a.handle,n,!1)||this._prepareDragStart(e,i,l)}}},_prepareDragStart:function(e,t,n){var a,o=this,r=o.el,i=o.options,l=r.ownerDocument;if(n&&!te&&n.parentNode===r){var s=w(n);if(oe=r,ne=(te=n).parentNode,re=te.nextSibling,ie=n,ge=i.group,F.dragged=te,me={target:te,clientX:(t||e).clientX,clientY:(t||e).clientY},be=me.clientX-s.left,we=me.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,te.style["will-change"]="all",a=function(){return Be("delayEnded",o,{evt:e}),F.eventCanceled?void o._onDrop():(o._disableDelayedDragEvents(),!xe&&o.nativeDraggable&&(te.draggable=!0),o._triggerDragStart(e,t),P({sortable:o,name:"choose",originalEvent:e}),void m(te,i.chosenClass,!0))},i.ignore.split(",").forEach((function(e){y(te,e.trim(),B)})),u(l,"dragover",nt),u(l,"mousemove",nt),u(l,"touchmove",nt),u(l,"mouseup",o._onDrop),u(l,"touchend",o._onDrop),u(l,"touchcancel",o._onDrop),xe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,te.draggable=!0),Be("delayStart",this,{evt:e}),!i.delay||i.delayOnTouchOnly&&!t||this.nativeDraggable&&(Te||De))a();else{if(F.eventCanceled)return void this._onDrop();u(l,"mouseup",o._disableDelayedDrag),u(l,"touchend",o._disableDelayedDrag),u(l,"touchcancel",o._disableDelayedDrag),u(l,"mousemove",o._delayedDragTouchMoveHandler),u(l,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&u(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,i.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Q(Z(t.clientX-this._lastX),Z(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){te&&B(te),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;d(e,"mouseup",this._disableDelayedDrag),d(e,"touchend",this._disableDelayedDrag),d(e,"touchcancel",this._disableDelayedDrag),d(e,"mousemove",this._delayedDragTouchMoveHandler),d(e,"touchmove",this._delayedDragTouchMoveHandler),d(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?u(document,"pointermove",this._onTouchMove):u(document,t?"touchmove":"mousemove",this._onTouchMove):(u(te,"dragend",this),u(oe,"dragstart",this._onDragStart));try{document.selection?H((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(qe=!1,oe&&te){Be("dragStarted",this,{evt:t}),this.nativeDraggable&&u(document,"dragover",at);var n=this.options;e||m(te,n.dragClass,!1),m(te,n.ghostClass,!0),F.active=this,e&&this._appendGhost(),P({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ve){this._lastX=ve.clientX,this._lastY=ve.clientY,et();for(var e=document.elementFromPoint(ve.clientX,ve.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ve.clientX,ve.clientY))!==t;)t=e;if(te.parentNode[Me]._isOutsideThisEl(e),t)do{if(t[Me]){if(t[Me]._onDragOver({clientX:ve.clientX,clientY:ve.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);tt()}},_onTouchMove:function(e){if(me){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,o=e.touches?e.touches[0]:e,r=ae&&h(ae,!0),i=ae&&r&&r.a,l=ae&&r&&r.d,s=Ve&&Ne&&N(Ne),c=(o.clientX-me.clientX+a.x)/(i||1)+(s?s[0]-Ue[0]:0)/(i||1),u=(o.clientY-me.clientY+a.y)/(l||1)+(s?s[1]-Ue[1]:0)/(l||1);if(!F.active&&!qe){if(n&&Q(Z(o.clientX-this._lastX),Z(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ae){r?(r.e+=c-(he||0),r.f+=u-(ye||0)):r={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");v(ae,"webkitTransform",d),v(ae,"mozTransform",d),v(ae,"msTransform",d),v(ae,"transform",d),he=c,ye=u,ve=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ae){var e=this.options.fallbackOnBody?document.body:oe,t=w(te,!0,Ve,!0,e),n=this.options;if(Ve){for(Ne=e;"static"===v(Ne,"position")&&"none"===v(Ne,"transform")&&Ne!==document;)Ne=Ne.parentNode;Ne!==document.body&&Ne!==document.documentElement?(Ne===document&&(Ne=b()),t.top+=Ne.scrollTop,t.left+=Ne.scrollLeft):Ne=b(),Ue=N(Ne)}m(ae=te.cloneNode(!0),n.ghostClass,!1),m(ae,n.fallbackClass,!0),m(ae,n.dragClass,!0),v(ae,"transition",""),v(ae,"transform",""),v(ae,"box-sizing","border-box"),v(ae,"margin",0),v(ae,"top",t.top),v(ae,"left",t.left),v(ae,"width",t.width),v(ae,"height",t.height),v(ae,"opacity","0.8"),v(ae,"position",Ve?"absolute":"fixed"),v(ae,"zIndex","100000"),v(ae,"pointerEvents","none"),F.ghost=ae,e.appendChild(ae),v(ae,"transform-origin",be/parseInt(ae.style.width)*100+"% "+we/parseInt(ae.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,o=n.options;return Be("dragStart",this,{evt:e}),F.eventCanceled?void this._onDrop():(Be("setupClone",this),!F.eventCanceled&&((le=A(te)).draggable=!1,le.style["will-change"]="",this._hideClone(),m(le,this.options.chosenClass,!1),F.clone=le),n.cloneId=H((function(){Be("clone",n),F.eventCanceled||(!n.options.removeCloneOnHide&&oe.insertBefore(le,te),n._hideClone(),P({sortable:n,name:"clone"}))})),!t&&m(te,o.dragClass,!0),t?(Re=!0,n._loopId=setInterval(n._emulateDragOver,50)):(d(document,"mouseup",n._onDrop),d(document,"touchend",n._onDrop),d(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(n,a,te)),u(document,"drop",n),v(te,"transform","translateZ(0)")),qe=!0,n._dragStartId=H(n._dragStarted.bind(n,t,e)),u(document,"selectstart",n),Se=!0,void(Oe&&v(document.body,"user-select","none")))},_onDragOver:function(e){function t(t,n){Be(t,N,i({evt:e,isOwner:y,axis:c?"vertical":"horizontal",revert:s,dragRect:r,targetRect:l,canSort:b,fromSortable:C,target:d,completed:a,onMove:function(t,n){return j(oe,u,te,r,t,w(t),e,n)},changed:o},n))}function n(){t("dragOverAnimationCapture"),N.captureAnimationState(),N!==C&&C.captureAnimationState()}function a(n){return t("dragOverCompleted",{insertion:n}),n&&(y?h._hideClone():h._showClone(N),N!==C&&(m(te,pe?pe.options.ghostClass:h.options.ghostClass,!1),m(te,f.ghostClass,!0)),pe!==N&&N!==F.active?pe=N:N===F.active&&pe&&(pe=null),C===N&&(N._ignoreWhileAnimating=d),N.animateAll((function(){t("dragOverAnimationComplete"),N._ignoreWhileAnimating=null})),N!==C&&(C.animateAll(),C._ignoreWhileAnimating=null)),(d!==te||te.animated)&&(d!==u||d.animated)||(Ce=null),f.dragoverBubble||e.rootEl||d===document||(te.parentNode[Me]._isOutsideThisEl(e.target),!n&&nt(e)),!f.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),D=!0}function o(){ue=k(te),fe=k(te,f.draggable),P({sortable:N,name:"change",toEl:u,newIndex:ue,newDraggableIndex:fe,originalEvent:e})}var r,l,s,c,u=this.el,d=e.target,f=this.options,g=f.group,h=F.active,y=ge===g,b=f.sort,C=pe||h,N=this,D=!1;if(!Xe){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),d=p(d,f.draggable,u,!0),t("dragOver"),F.eventCanceled)return D;if(te.contains(e.target)||d.animated&&d.animatingX&&d.animatingY||N._ignoreWhileAnimating===d)return a(!1);if(Re=!1,h&&!f.disabled&&(y?b||(s=!oe.contains(te)):pe===this||(this.lastPutMode=ge.checkPull(this,h,te,e))&&g.checkPut(this,h,te,e))){if(c="vertical"===this._getDirection(e,d),r=w(te),t("dragOverValid"),F.eventCanceled)return D;if(s)return ne=oe,n(),this._hideClone(),t("revert"),F.eventCanceled||(re?oe.insertBefore(te,re):oe.appendChild(te)),a(!0);var T=E(u,f.draggable);if(!T||function(e,t,n){var a=w(E(n.el,n.options.draggable));return t?e.clientX>a.right+10||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+10}(e,c,this)&&!T.animated){if(T===te)return a(!1);if(T&&u===e.target&&(d=T),d&&(l=w(d)),!1!==j(oe,u,te,r,d,l,e,!!d))return n(),u.appendChild(te),ne=u,o(),a(!0)}else if(d.parentNode===u){l=w(d);var x,A,L,_=te.parentNode!==u,I=!function(e,t,n){var a=n?e.left:e.top,o=n?e.right:e.bottom,r=n?e.width:e.height,i=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return a===i||o===l||a+r/2===i+s/2}(te.animated&&te.toRect||r,d.animated&&d.toRect||l,c),M=c?"top":"left",B=S(d,"top","top")||S(te,"top","top"),W=B?B.scrollTop:void 0;if(Ce!==d&&(A=l[M],He=!1,ze=!I&&f.invertSwap||_),0!==(x=R(e,d,l,c,I?1:f.swapThreshold,null==f.invertedSwapThreshold?f.swapThreshold:f.invertedSwapThreshold,ze,Ce===d))){var H=k(te);do{H-=x,L=ne.children[H]}while(L&&("none"===v(L,"display")||L===ae))}if(0===x||L===d)return a(!1);Ce=d,Ee=x;var z=d.nextElementSibling,U=!1,X=j(oe,u,te,r,d,l,e,U=1===x);if(!1!==X)return(1===X||-1===X)&&(U=1===X),Xe=!0,setTimeout(q,30),n(),U&&!z?u.appendChild(te):d.parentNode.insertBefore(te,U?z:d),B&&O(B,0,W-B.scrollTop),ne=te.parentNode,void 0===A||ze||(ke=Z(A-w(d)[M])),o(),a(!0)}if(u.contains(te))return a(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){d(document,"mousemove",this._onTouchMove),d(document,"touchmove",this._onTouchMove),d(document,"pointermove",this._onTouchMove),d(document,"dragover",nt),d(document,"mousemove",nt),d(document,"touchmove",nt)},_offUpEvents:function(){var e=this.el.ownerDocument;d(e,"mouseup",this._onDrop),d(e,"touchend",this._onDrop),d(e,"pointerup",this._onDrop),d(e,"touchcancel",this._onDrop),d(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;return ue=k(te),fe=k(te,n.draggable),Be("drop",this,{evt:e}),ne=te&&te.parentNode,ue=k(te),fe=k(te,n.draggable),F.eventCanceled||(qe=!1,ze=!1,He=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),z(this.cloneId),z(this._dragStartId),this.nativeDraggable&&(d(document,"drop",this),d(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Oe&&v(document.body,"user-select",""),v(te,"transform",""),e&&(Se&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ae&&ae.parentNode&&ae.parentNode.removeChild(ae),(oe===ne||pe&&"clone"!==pe.lastPutMode)&&le&&le.parentNode&&le.parentNode.removeChild(le),te&&(this.nativeDraggable&&d(te,"dragend",this),B(te),te.style["will-change"]="",Se&&!qe&&m(te,pe?pe.options.ghostClass:this.options.ghostClass,!1),m(te,this.options.chosenClass,!1),P({sortable:this,name:"unchoose",toEl:ne,newIndex:null,newDraggableIndex:null,originalEvent:e}),oe===ne?ue!==ce&&0<=ue&&(P({sortable:this,name:"update",toEl:ne,originalEvent:e}),P({sortable:this,name:"sort",toEl:ne,originalEvent:e})):(0<=ue&&(P({rootEl:ne,name:"add",toEl:ne,fromEl:oe,originalEvent:e}),P({sortable:this,name:"remove",toEl:ne,originalEvent:e}),P({rootEl:ne,name:"sort",toEl:ne,fromEl:oe,originalEvent:e}),P({sortable:this,name:"sort",toEl:ne,originalEvent:e})),pe&&pe.save()),F.active&&((null==ue||-1===ue)&&(ue=ce,fe=de),P({sortable:this,name:"end",toEl:ne,originalEvent:e}),this.save())))),void this._nulling()},_nulling:function(){Be("nulling",this),oe=te=ne=ae=re=le=ie=se=me=ve=Se=ue=fe=ce=de=Ce=Ee=pe=ge=F.dragged=F.ghost=F.clone=F.active=null,Ge.forEach((function(e){e.checked=!0})),Ge.length=he=ye=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":te&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,a=0,o=n.length,r=this.options;a<o;a++)p(e=n[a],r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||W(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach((function(e,a){var o=n.children[a];p(o,this.options.draggable,n,!1)&&(t[e]=o)}),this),e.forEach((function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return p(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var a=je.modifyOption(this,e,t);n[e]=void 0===a?t:a,"group"===e&&Qe(n)},destroy:function(){Be("destroy",this);var e=this.el;e[Me]=null,d(e,"mousedown",this._onTapStart),d(e,"touchstart",this._onTapStart),d(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(d(e,"dragover",this),d(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),We.splice(We.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!se){if(Be("hideClone",this),F.eventCanceled)return;v(le,"display","none"),this.options.removeCloneOnHide&&le.parentNode&&le.parentNode.removeChild(le),se=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(se){if(Be("showClone",this),F.eventCanceled)return;oe.contains(te)&&!this.options.group.revertClone?oe.insertBefore(le,te):re?oe.insertBefore(le,re):oe.appendChild(le),this.options.group.revertClone&&this.animate(te,le),v(le,"display",""),se=!1}}else this._hideClone()}},Ye&&u(document,"touchmove",(function(e){(F.active||qe)&&e.cancelable&&e.preventDefault()})),F.utils={on:u,off:d,css:v,find:y,is:function(e,t){return!!p(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:x,closest:p,toggleClass:m,clone:A,index:k,nextTick:H,cancelNextTick:z,detectDirection:Ze,getChild:C},F.get=function(e){return e[Me]},F.mount=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(F.utils=i({},F.utils,e.utils)),je.mount(e)}))},F.create=function(e,t){return new F(e,t)},F.version="1.10.2";var ot,rt,it,lt,st,ct,ut=[],dt=!1,ft=x((function(e,t,n,a){if(t.scroll){var o,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=b(),u=!1;rt!==n&&(rt=n,U(),ot=t.scroll,o=t.scrollFn,!0===ot&&(ot=D(n,!0)));var d=0,f=ot;do{var g=f,p=w(g),m=p.top,h=p.bottom,y=p.left,S=p.right,C=p.width,E=p.height,k=void 0,N=void 0,T=g.scrollWidth,x=g.scrollHeight,A=v(g),L=g.scrollLeft,_=g.scrollTop;g===c?(k=C<T&&("auto"===A.overflowX||"scroll"===A.overflowX||"visible"===A.overflowX),N=E<x&&("auto"===A.overflowY||"scroll"===A.overflowY||"visible"===A.overflowY)):(k=C<T&&("auto"===A.overflowX||"scroll"===A.overflowX),N=E<x&&("auto"===A.overflowY||"scroll"===A.overflowY));var I=k&&(Z(S-r)<=l&&L+C<T)-(Z(y-r)<=l&&!!L),M=N&&(Z(h-i)<=l&&_+E<x)-(Z(m-i)<=l&&!!_);if(!ut[d])for(var P=0;P<=d;P++)ut[P]||(ut[P]={});(ut[d].vx!=I||ut[d].vy!=M||ut[d].el!==g)&&(ut[d].el=g,ut[d].vx=I,ut[d].vy=M,clearInterval(ut[d].pid),(0!=I||0!=M)&&(u=!0,ut[d].pid=setInterval(function(){a&&0===this.layer&&F.active._onTouchMove(st);var t=ut[this.layer].vy?ut[this.layer].vy*s:0,n=ut[this.layer].vx?ut[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(F.dragged.parentNode[Me],n,t,e,st,ut[this.layer].el)||O(ut[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==c&&(f=D(f,!1)));dt=u}}),30),gt=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,o=e.activeSortable,r=e.dispatchSortableEvent,i=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||o;i();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(u)&&(r("spill"),this.onSpill({dragEl:a,putSortable:n}))}};G.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=C(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:gt},r(G,{pluginName:"revertOnSpill"}),Y.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:gt},r(Y,{pluginName:"removeOnSpill"});var pt,mt,vt,ht,yt,bt,wt=[],St=[],Ct=!1,Et=!1,kt=!1;F.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?u(document,"dragover",this._handleAutoScroll):this.options.supportPointer?u(document,"pointermove",this._handleFallbackAutoScroll):t.touches?u(document,"touchmove",this._handleFallbackAutoScroll):u(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?d(document,"dragover",this._handleAutoScroll):(d(document,"pointermove",this._handleFallbackAutoScroll),d(document,"touchmove",this._handleFallbackAutoScroll),d(document,"mousemove",this._handleFallbackAutoScroll)),X(),U(),clearTimeout(ee),ee=void 0},nulling:function(){st=rt=ot=dt=ct=it=lt=null,ut.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(a,o);if(st=e,t||Te||De||Oe){ft(e,this.options,r,t);var i=D(r,!0);dt&&(!ct||a!==it||o!==lt)&&(ct&&X(),ct=setInterval((function(){var r=D(document.elementFromPoint(a,o),!0);r!==i&&(i=r,U()),ft(e,n.options,r,t)}),10),it=a,lt=o)}else{if(!this.options.bubbleScroll||D(r,!0)===b())return void U();ft(e,this.options,D(r,!1),!1)}}},r(e,{pluginName:"scroll",initializeByDefault:!0})}),F.mount(Y,G),t.default=F},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),a=(t.Throttle=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"add",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window,a=this;a[e]=a[e]||{callbacks:[]},a.addCallback(e,t);var o=function(t){a.throttle(a[e],t)};return n.addEventListener(e,o),o}},{key:"addCallback",value:function(e,t){t&&this[e].callbacks.push(t)}},{key:"runCallbacks",value:function(e,t){e.callbacks.forEach((function(e){e(t)})),e.running=!1}},{key:"throttle",value:function(e,t){var n=this;e.running||(e.running=!0,window.requestAnimationFrame?window.requestAnimationFrame((function(){n.runCallbacks(e,t)})):setTimeout(n.runCallbacks.bind(e),66))}}]),e}(),{getStyle:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=void 0;return window.getComputedStyle?n=window.getComputedStyle(e,null):e.currentStyle&&(n=e.currentStyle),t?n[t]:n},fadeOut:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:250;e.style.opacity=1,function n(){var a=+e.style.opacity-1/(t/60);0<a?(e.style.opacity=a,requestAnimationFrame(n)):e.remove()}()},slideDown:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:666,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];e.style.display="block";var o=a.getStyle(e),r=o.overflow;e.style.overflow="hidden";var i=parseInt(o.height,10);e.style.height="0px",function a(){var o=parseFloat(e.style.height);o<i?(e.style.height=o+i/(t/60)+"px",requestAnimationFrame(a)):(e.style.overflow=r,e.style.height="auto",n&&n(e))}()},slideUp:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:666,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=a.getStyle(e),r=parseInt(o.height),i=o.overflow;e.style.overflow="hidden",e.style.height=r+"px";var l=o.minHeight;e.style.minHeight="auto";var s=parseFloat(r/(t/60)).toFixed(2);!function t(){var a=parseInt(e.style.height,10)-s;0<a?(e.style.height=a+"px",requestAnimationFrame(t)):(e.style.overflow=i,e.style.display="none",e.style.minHeight=l,delete e.style.height,n&&n(e))}()},slideToggle:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:250,n="none"===a.getStyle(e,"display");n?a.slideDown(e,t):a.slideUp(e,t)}});t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=n(1),r={confirmClearAll:function(e){a.default.multiActions("warning",(0,o.getString)("attention"),e.confirmationMessage,[{title:(0,o.getString)("proceed"),type:"primary",action:function(){e.clearAllAction(e)}},{title:(0,o.getString)("cancel"),type:"default"}])},confirmReset:function(e){a.default.multiActions("warning",(0,o.getString)("attention"),e.confirmationMessage,[{title:(0,o.getString)("proceed"),type:"primary",action:function(){e.resetAction(e)}},{title:(0,o.getString)("cancel"),type:"default"}])},confirmClearStorage:function(e){a.default.multiActions("danger",(0,o.getString)("danger"),e.confirmationMessage,[{title:(0,o.getString)("clearstorageautomatic"),type:"primary",action:function(){e.clearStorageAction(e)}},{title:(0,o.getString)("clearstoragemanually"),type:"default",action:function(){e.clearStorageManualAction(e)}}])}},i={formeoSaved:null,formeoUpdated:null,init:null,opts:null};i.formeoSaved=new CustomEvent("formeoSaved",{}),i.formeoUpdated=new CustomEvent("formeoUpdated",{}),i.init=function(e){return i.opts=(0,o.assign)({},r,e),i},document.addEventListener("confirmClearAll",(function(e){var t={timeStamp:e.timeStamp,type:e.type,rowCount:e.detail.rows.length,confirmationMessage:e.detail.confirmationMessage,clearAllAction:e.detail.clearAllAction,btnCoords:e.detail.btnCoords};i.opts.confirmClearAll(t)})),document.addEventListener("confirmClearStorage",(function(e){var t={timeStamp:e.timeStamp,type:e.type,confirmationMessage:e.detail.confirmationMessage,clearStorageAction:e.detail.clearStorageAction,clearStorageManualAction:e.detail.clearStorageManualAction};i.opts.confirmClearStorage(t)})),document.addEventListener("confirmReset",(function(e){var t={timeStamp:e.timeStamp,type:e.type,rowCount:e.detail.rows.length,confirmationMessage:e.detail.confirmationMessage,resetAction:e.detail.resetAction,btnCoords:e.detail.btnCoords};i.opts.confirmReset(t)})),t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(4)),i=a(n(2)),l=a(n(0)),s=n(1),c=n(3),u={type:"field"},d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;n.opts=Object.assign({},u,t),n.labels=n.panelNav();var a=n.panelsWrap();return n.panels=a.childNodes,n.currentPanel=n.panels[0],n.nav=n.navActions(),"field"===n.opts.type&&setTimeout(n.setPanelsHeight.bind(n),100),n.panelDisplay="slider",{content:[n.labels,a],nav:n.nav,actions:{resize:n.resizePanels.bind(n)}}}return o(e,[{key:"resizePanels",value:function(){var e=this.panelsWrap,t=e.parentElement.parentElement,n=390<parseInt(l.default.getStyle(t,"width"))||1<this.opts.panels.length;this.panelDisplay=n?"tabbed":"slider",1==n?e.parentElement.classList.add("tabbed-panels"):e.parentElement.classList.remove("tabbed-panels");var a=e.style,o=l.default.getStyle(this.currentPanel,"height");return a.height=o,o}},{key:"setPanelsHeight",value:function(){var e=document.getElementById(this.opts.id);this.slideToggle=e.querySelector(".field-edit"),this.slideToggle.style.display="block",this.slideToggle.style.position="absolute",this.slideToggle.style.opacity=0,this.resizePanels(),this.slideToggle.style.display="none",this.slideToggle.style.position="relative",this.slideToggle.style.opacity=1,this.slideToggle.style.height="auto"}},{key:"panelsWrap",value:function(){return this.panelsWrap=l.default.create({tag:"div",attrs:{className:"panels"},content:this.opts.panels}),"field"===this.opts.type&&this.sortableProperties(this.panelsWrap),this.panelsWrap}},{key:"sortableProperties",value:function(e){var t=this,n=e.getElementsByClassName("field-edit-group");return i.default.forEach(n,(function(e){e.fieldID=t.opts.id,e.isSortable&&r.default.create(e,{animation:150,group:{name:"edit-"+e.editGroup,pull:!0,put:["properties"]},sort:!0,forceFallback:i.default.isFireFoxEdge(),fallbackOnBody:i.default.isFireFoxEdge(),fallbackClass:"sortable-fallback-field",handle:".prop-order",onSort:function(e){t.propertySave(e.to),t.resizePanels()}})}))}},{key:"propertySave",value:function(e){var t=l.default.fields.get(this.opts.id);return c.data.save(e.editGroup,e,!1),t.instance.updatePreview()}},{key:"panelNav",value:function(){for(var e,t=this,n=this,a={tag:"div",attrs:{className:"panel-labels"},content:{tag:"div",content:[]}},o=this.opts.panels,r=0;r<o.length;r++)e={tag:"h5",action:{click:function(e){var t=i.default.indexOfNode(e.target,e.target.parentElement);n.currentPanel=n.panels[t];var a=e.target.parentElement.childNodes;n.nav.refresh(t),l.default.removeClasses(a,"active-tab"),e.target.classList.add("active-tab")}},content:o[r].config.label},delete o[r].config.label,0===r&&(e.className="active-tab"),a.content.content.push(e);var c={tag:"button",attrs:{className:"next-group",title:(0,s.getString)("controlGroups.nextGroup"),type:"button"},dataset:{toggle:"tooltip",placement:"top"},action:{click:function(e){return t.nav.nextGroup(e)}},content:l.default.icon("triangle-right")},u={tag:"button",attrs:{className:"prev-group",title:(0,s.getString)("controlGroups.prevGroup"),type:"button"},dataset:{toggle:"tooltip",placement:"top"},action:{click:function(e){return t.nav.prevGroup(e)}},content:l.default.icon("triangle-left")};return l.default.create({tag:"nav",attrs:{className:"panel-nav"},content:[u,a,c]})}},{key:"navActions",value:function(){var e=this,t=this,n={},a=this.currentPanel.parentElement,o=this.labels.querySelector(".panel-labels").firstChild,r=this.currentPanel.parentElement.childNodes,s=i.default.indexOfNode(this.currentPanel,a),c={},u=function(t){var n=o.childNodes;return l.default.removeClasses(n,"active-tab"),o.childNodes[t].classList.add("active-tab"),e.currentPanel=r[t],e.panelsWrap.style.height=l.default.getStyle(e.currentPanel,"height"),"field"===e.opts.type&&(e.slideToggle.style.height="auto"),e.currentPanel},d=function(e){"tabbed"===t.panelDisplay?o.removeAttribute("style"):o.style.transform="translateX(-"+e.nav+"px)",a.style.transform="translateX(-"+e.panel+"px)"};return n.refresh=function(e){void 0!==e&&(s=e,u(e)),t.resizePanels(),c={nav:o.offsetWidth*s,panel:a.offsetWidth*s},d(c)},n.nextGroup=function(){var t=s+1;if(t!==r.length)c={nav:o.offsetWidth*t,panel:a.offsetWidth*t},d(c),u(t),s++;else{var n={nav:o.style.transform,panel:a.style.transform};c={nav:o.offsetWidth*s+10,panel:a.offsetWidth*s+10},d(c),setTimeout((function(){o.style.transform=n.nav,a.style.transform=n.panel}),150)}return e.currentPanel},n.prevGroup=function(){if(0!==s){var e=s-1;c={nav:o.offsetWidth*e,panel:a.offsetWidth*e},d(c),u(e),s--}else{var t=[o.style.transform,a.style.transform],n="translateX(10px)";o.style.transform=n,a.style.transform=n,setTimeout((function(){o.style.transform=t[0],a.style.transform=t[1]}),150)}},n}}]),e}();t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(3),l=a(n(5)),s=a(n(2)),c=a(n(15)),u=a(n(0)),d=n(9),f=a(n(7)),g=n(1),p=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;o(this,e);var r=this,l=i.formData.fields.get(t)||(0,g.clone)(i.registeredFields[t]);"clone"==n&&"template"in l.attrs?delete l.attrs.template:l=null===a?l:s.default.merge(l,a),r.fieldID=l.id||(0,g.uuid)(),r.metaID=l.meta.id,l.id=r.fieldID,i.formData.fields.set(r.fieldID,l),this.fieldData=l;var c={tag:"li",attrs:{className:"stage-fields field-type-"+l.meta.id},id:r.fieldID,content:[u.default.actionButtons(r.fieldID,"field"),r.fieldEdit()],panelNav:r.panelNav,dataset:{hoverTag:(0,g.getString)("field")},fType:"fields",action:{mouseenter:function(){document.getElementById(r.fieldID).classList.add("hovering-field")},mouseleave:function(){document.getElementById(r.fieldID).classList.remove("hovering-field")}}};return c=u.default.create(c),u.default.fields.set(r.fieldID,{field:c,instance:r}),r.preview=u.default.create(r.fieldPreview()),c.appendChild(r.preview),c}return r(e,[{key:"updatePreview",value:function(){var e=this,t=s.default.copyObj(i.formData.fields.get(e.fieldID)),n=u.default.create(t,!0);return u.default.empty(e.preview),e.preview.appendChild(n),n}},{key:"editPanel",value:function(e){var t,n=this,a=this,o=i.formData.fields.get(a.fieldID),r=void 0,l=void 0,c={tag:"div",className:"f-panel-wrap",content:[]};o[e]&&(l={tag:"ul",attrs:{className:["field-edit-group","field-edit-"+e]},editGroup:e,isSortable:"options"===e,content:[]},"array"===(r=u.default.contentType(o[e]))?(t=o[e],c.content.push(a.panelHeading({panelArray:t,panelType:e,fieldData:o}))):t=Object.keys(o[e]),c.content.push(l),s.default.forEach(t,(function(t,i){if(n.isAllowedAttr(t)){var s={i:i,dataProp:t,fieldData:o,panelType:e,propType:r};l.content.push(a.panelContent(s))}})));return c}},{key:"panelHeading",value:function(e){var t={tag:"div",className:"prop-heading-wrap",content:[]};return Object.keys(e.panelArray[0]).forEach((function(n){var a=e.fieldData.tag.toLowerCase();null!=e.fieldData.attrs&&null!=e.fieldData.attrs.type&&(a+="-"+e.fieldData.attrs.type.toLowerCase()),a+="-"+e.panelType+"-"+n,t.content.push({tag:"label",className:a,content:(0,g.getString)(a)})})),t}},{key:"panelContent",value:function(e){var t=this,n=e.panelType,a=e.dataProp,o=i.formData.fields.get(t.fieldID);a="string"==typeof a?a:e.i;var r=(0,g.uuid)(),s=o[n][a],c={tag:"div",className:["prop-inputs","form-group"],content:t.editPanelInputs(a,s,n,r)},d={tag:"li",className:[n+"-"+a+"-wrap","prop-wrap"],id:r,content:[]},f={tag:"button",attrs:{type:"button",className:"btn btn-primary prop-order prop-control",title:(0,g.getString)("order-option")},content:u.default.icon("move-vertical")},p={tag:"div",className:"prop-controls",content:[{tag:"button",attrs:{type:"button",className:"btn btn-danger prop-remove prop-control",title:(0,g.getString)("remove-"+n)},action:{click:function(){l.default.slideUp(document.getElementById(d.id),666,(function(e){var o=e.parentElement,r=i.formData.fields.get(t.fieldID),l=r[n];u.default.remove(e),Array.isArray(l)?l.splice(a,1):delete l[a],i.data.save(n,o),u.default.empty(t.preview);var s=u.default.create(r,!0);t.preview.appendChild(s),t.resizePanelWrap()}))}},content:u.default.icon("remove")}]};return"array"===e.propType&&(c.className.push("f-input-group"),p.content.unshift(f)),d.propData=o[n][a],this.isAllowedAttr(a)?(d.content.push(p,c),d.className.push("control-count-"+p.content.length),d):""}},{key:"escapeRegExp",value:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},{key:"unescapeRegExp",value:function(e){return e.replace(/[\\]/g,"$&")}},{key:"editPanelInputs",value:function(e,t,n,a){var o=this,r=[],l=i.formData.fields.get(o.fieldID);l.attrs.placeholder=l.attrs.placeholder?l.attrs.placeholder:l.config.label;var c="options"===n;return r.push(function t(r,d){var f=u.default.contentType(d,r),p="number"==typeof e,m=n+"."+r;p&&(m=n+"["+e+"]."+r);var v=function(e,t,n){var a=(0,g.getString)("placeholder."+e);return{string:{className:"form-control",type:"text",value:t,placeholder:a},boolean:{get type(){var t="checkbox";("select"===o.fieldData.tag&&"selected"===e&&(t="radio"),o.fieldData.attrs)&&("radio"===o.fieldData.attrs.type&&"selected"===e&&(t="radio"));return t},value:t},number:{type:"number",value:t},array:{className:""},textarea:{placeholder:a,rows:8}}[n]},h=function(e){return(0,g.getString)(n+"."+e)||s.default.capitalize(e)},y={array:function(t,r){return{fMap:m,tag:"select",id:e+"-"+a,attrs:v(t,r,"array"),config:{label:h(t),hideLabel:c},content:r.map((function(e){return{tag:"option",attrs:{value:e.value,selected:e.selected},content:e.label}})),action:{change:function(a){var r=[],u=l[n][e],d=(c?u[t]:u).map((function(e){e.selected;var t=function(e,t){var n={};for(var a in e)0<=t.indexOf(a)||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["selected"]);return r.push(t.value),t}));d[r.indexOf(a.target.value)].selected=!0,c&&(e=s.default.indexOfNode(a.target.closest(".prop-wrap")),m=n+"["+e+"]."+t),s.default.set(l,m,d),i.data.save(),o.updatePreview()}}}},string:function(t,r){var u={fMap:m,tag:"input",id:e+"-"+a,attrs:v(t,r,"string"),action:{change:function(a){c&&(e=s.default.indexOfNode(a.target.closest(".prop-wrap")),m=n+"["+e+"]."+t);var r=a.target.value;return s.default.isHtml(r)?void(a.target.value=s.default.stripHtml(r)):(s.default.set(l,m,"pattern"==t?o.escapeRegExp(r):r),i.data.save(),void o.updatePreview())}}};return p||(u.config={label:h(t)}),u},textarea:function(t,r){var u={fMap:m,tag:"textarea",id:e+"-"+a,attrs:v(t,r,"textarea"),content:r,action:{change:function(a){c&&(e=s.default.indexOfNode(a.target.closest(".prop-wrap")),m=n+"["+e+"]."+t),s.default.set(l,m,a.target.value),i.data.save(),o.updatePreview()}}};return p||(u.config={label:h(t)}),u},boolean:function(t,r){var d={tag:"input",attrs:v(t,r,"boolean"),fMap:m,id:e+"-"+a,name:o.fieldID+"-selected",action:{change:function(a){("select"==l.tag||l.attrs.type&&"radio"==l.attrs.type)&&l.options.forEach((function(e){e.selected=!1})),c&&(e=s.default.indexOfNode(a.target.closest(".prop-wrap")),m=n+"["+e+"]."+t),s.default.set(l,m,a.target.checked),i.data.save(),o.updatePreview()}}};(r&&(d.attrs.checked=r),p)?d={tag:"span",className:"f-addon",content:u.default.checkbox(d)}:d.config={label:h(t)};return d},object:function(e,n){var a=[];for(var o in n)if(s.default.get(n,o)){if(c&&"input"==l.tag&&"name"==o){delete o.name;continue}s.default.get(n,o)&&a.push(t(o,n[o]))}return a}};return y.number=y.string,y[f](r,d)}(e,t)),r}},{key:"isAllowedAttr",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"type",t=this,n=!0,a=i.registeredFields[t.metaID].config.disabledAttrs;return a&&(n=!s.default.inArray(e,a)),n}},{key:"getElementData",value:function(e){for(var t=this.metaID,n=0;n<d.defaultElements.length;n++)if(d.defaultElements[n].meta.id==t){var a=d.defaultElements[n][e];return Array.isArray(a)&&(a=a[0]),a}return{}}},{key:"getNextChildIndex",value:function(e){return e.hasChildNodes?e.childNodes.length:0}},{key:"addAttribute",value:function(e,t){if(!this.isAllowedAttr(e)){var n=(0,g.getString)("attributenotpermitted");n=n.replace("{{attr}}",e),u.default.alert("warning",n)}var a=this,o=document.getElementById(a.fieldID).querySelector(".field-edit-attrs"),r=s.default.hyphenCase(e),l=i.formData.fields.get(a.fieldID);"string"==typeof t&&s.default.inArray(t,["true","false"])&&(t=JSON.parse(t),"pattern"==e&&(t=a.unescapeRegExp(t))),l.attrs[r]=t;var c={dataObj:l,dataProp:r,i:Object.keys(l.attrs).length,panelType:"attrs"},d=o.querySelector(".attrs-"+r+"-wrap"),f=a.panelContent(c);if(f){var p=u.default.create(f);d?o.replaceChild(p,d):o.appendChild(p),i.data.save(c.panelType,o),a.updatePreview(),a.resizePanelWrap()}}},{key:"addOption",value:function(){var e=this,t=u.default.fields.get(e.fieldID).field,n=i.formData.fields.get(e.fieldID),a=e.getElementData("options"),o=t.querySelector(".field-edit-options"),r=(0,g.cleanObj)(a);n.options.push(r);var l={i:e.getNextChildIndex(o),dataProp:r,dataObj:n,panelType:"options",propType:"array"};o.appendChild(u.default.create(e.panelContent(l))),e.resizePanelWrap(),i.data.save(),u.default.empty(e.preview);var s=u.default.create(i.formData.fields.get(e.fieldID),!0);e.preview.appendChild(s)}},{key:"panelEditButtons",value:function(e){var t=this;return{tag:"div",attrs:{className:"panel-action-buttons"},content:[{tag:"button",attrs:{type:"button",className:"add-"+e+" btn btn-primary"},content:(0,g.getString)("panelEditButtons."+e),action:{click:function(n){var a={btnCoords:u.default.coords(n.target)};"attrs"===e?(a.addAction=t.addAttribute.bind(t),a.message={attr:(0,g.getString)("action.add.attrs.attr"),value:(0,g.getString)("action.add.attrs.value")}):"options"===e&&(a.addAction=t.addOption.bind(t));var o=s.default.capitalize(e),r=new CustomEvent("onAdd"+o,{detail:a});c.default.add[e](a),document.dispatchEvent(r)}}}]}}},{key:"fieldEdit",value:function(){var e=this,t=[],n=["object","array"],a=["config","meta","action"],o=i.formData.fields.get(e.fieldID),r=Object.keys(o).filter((function(e){return!s.default.inArray(e,a)})),l={tag:"div",className:["field-edit","slide-toggle","panels-wrap"]};s.default.forEach(r,(function(a){var r=u.default.contentType(o[a]);if(s.default.inArray(r,n)){var i={tag:"div",attrs:{className:"f-panel "+a+"-panel"},config:{label:(0,g.getString)("panelLabels."+a)||""},content:[e.editPanel(a),e.panelEditButtons(a)],action:{}};t.push(i)}}));var c={panels:t,id:e.fieldID};if(t.length){var d=e.panels=new f.default(c);l.className.push("panel-count-"+t.length),l.content=d.content,e.panelNav=d.nav,e.resizePanelWrap=d.actions.resize}else setTimeout((function(){var t=u.default.fields.get(e.fieldID).field,n=t.querySelector(".item-edit-toggle"),a=t.querySelector(".field-actions"),o=a.getElementsByTagName("button");a.style.maxWidth=24*o.length+"px",u.default.remove(n)}),0);return l}},{key:"fieldPreview",value:function(){var e=this,t=this,n=(0,g.clone)(i.formData.fields.get(t.fieldID));return n.id="prev-"+t.fieldID,{tag:"div",attrs:{className:"field-preview"},content:u.default.create(n,!0),action:{change:function(e){var n=e.target;if(n.fMap){var a=i.formData.fields.get(t.fieldID),o=n.checked,r=n.type,l=n.fMap;if(s.default.inArray(r,["checkbox","radio"])){var c=a.options;"radio"===r&&c.forEach((function(e){e.selected=!1})),s.default.set(a,l,o),i.data.save()}}},click:function(e){"true"===e.target.contentEditable&&e.preventDefault()},input:function(e){var n=i.formData.fields.get(t.fieldID),a="content";e.target.fMap&&(a=e.target.fMap);var o=function(){"true"===e.target.contentEditable?("config.label"==a&&s.default.isHtml(e.target.innerHTML)&&(e.target.innerHTML=s.default.stripHtml(e.target.innerHTML),e.target.focus(),document.execCommand("selectAll",!1,null),document.getSelection().collapseToEnd()),""==e.target.innerHTML&&(e.target.innerHTML=" "),s.default.set(n,a,e.target.innerHTML)):s.default.set(n,a,e.target.value)};o(),(0,g.closest)(e.target,"field-preview").previousSibling.querySelector(".attrs-placeholder-wrap")||(a="attrs.placeholder",o()),i.data.save("field",t.fieldID)},focusout:function(){e.updatePreview()}}}}}]),e}();t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=document.getElementById(e);if(t.nextSibling)return{column:t.nextSibling,dir:1};if(t.previousSibling&&t.previousSibling.classList.contains("stage-columns"))return{column:t.previousSibling,dir:-1};var n=(0,d.closestFtype)(t);return t=new u.default,n.append(t),l.data.saveColumnOrder(n),f.default.columnWidths(n),{column:t,dir:1}}Object.defineProperty(t,"__esModule",{value:!0}),t.addCompositeFields=t.defaultElements=t.Controls=void 0;var r=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=a(n(4)),l=n(3),s=a(n(8)),c=a(n(2)),u=a(n(14)),d=n(1),f=a(n(0));n(22);var g={},p=[{tag:"div",config:{label:(0,d.getString)("tab")},meta:{group:"layout",icon:"tab",id:"layout-tab"}},{tag:"div",config:{label:(0,d.getString)("column")},meta:{group:"layout",icon:"columns",id:"layout-column"}},{tag:"div",config:{label:(0,d.getString)("row")},meta:{group:"layout",icon:"rows",id:"layout-row"},conditions:[]},{tag:"input",attrs:{type:"text",required:!1,name:"",className:"form-control",style:""},config:{disabledAttrs:["type","template"],label:(0,d.getString)("input.text")},meta:{group:"standard",icon:"text-input",id:"text-input"},fMap:"attrs.value"},{tag:"textarea",config:{label:(0,d.getString)("textarea"),disabledAttrs:["template"]},meta:{group:"standard",icon:"textarea",id:"textarea"},attrs:{required:!1,name:"",className:"form-control",style:""}},{tag:"select",config:{label:(0,d.getString)("select"),disabledAttrs:["template"]},attrs:{required:!1,name:"",className:"form-control",style:""},meta:{group:"standard",icon:"select",id:"select"},options:[1,2,3,4].map((function(e){return{label:"option label-"+e,value:"option-"+e,selected:!1}}))},{tag:"input",attrs:{type:"radio",name:"",required:!1,style:""},config:{label:(0,d.getString)("radioGroup"),disabledAttrs:["type","template"]},meta:{group:"standard",icon:"radio-group",id:"radio"},options:[1,2,3].map((function(e){return{label:"Radio-"+e,value:"radio value-"+e,selected:!1}}))},{tag:"input",attrs:{type:"checkbox",name:"",required:!1,style:""},config:{label:(0,d.getString)("checkbox")+" - "+(0,d.getString)("checkboxes"),disabledAttrs:["type","template"]},meta:{group:"standard",icon:"checkbox",id:"checkbox"},options:[1,2,3].map((function(e){return{label:"Checkbox -"+e,value:"checkbox value-"+e,selected:!1}}))},{tag:"input",attrs:{type:"number",required:!1,className:"form-control",name:"",style:""},config:{label:(0,d.getString)("number"),disabledAttrs:["type","template"]},meta:{group:"standard",icon:"hash",id:"number"},fMap:"attrs.value"},{tag:"button",attrs:{className:[{label:(0,d.getString)("grouped"),value:"btn-group"},{label:(0,d.getString)("ungrouped"),value:"f-field-group"}],style:""},config:{label:(0,d.getString)("button"),hideLabel:!0,disabledAttrs:["type","template"],disabledControl:!0},meta:{group:"standard",icon:"button",id:"button"},options:[{label:(0,d.getString)("button"),type:[{label:(0,d.getString)("button"),value:"button",selected:!0},{label:(0,d.getString)("reset"),value:"reset"},{label:(0,d.getString)("submit"),value:"submit"}],className:[{label:(0,d.getString)("default"),value:"btn",selected:!0},{label:(0,d.getString)("primary"),value:"btn btn-primary"},{label:(0,d.getString)("secondary"),value:"btn btn-secondary"},{label:(0,d.getString)("success"),value:"btn btn-success"},{label:(0,d.getString)("info"),value:"btn btn-info"},{label:(0,d.getString)("warning"),value:"btn btn-warning"},{label:(0,d.getString)("danger"),value:"btn btn-danger"},{label:(0,d.getString)("dark"),value:"btn btn-dark"},{label:(0,d.getString)("light"),value:"btn btn-light"},{label:(0,d.getString)("link"),value:"btn btn-link"}]}]},{tag:"input",attrs:{type:"text",required:!1,className:"form-control",style:""},config:{disabledAttrs:["type","template"],label:(0,d.getString)("control-name"),composite:!0},meta:{group:"advance",icon:"user-circle",id:"name"},fMap:"attrs.value"},{tag:"input",attrs:{type:"date",required:!1,className:"form-control",name:"",style:""},config:{disabledAttrs:["type","template"],label:(0,d.getString)("input.date")},meta:{group:"advance",icon:"calendar",id:"date-input"}},{tag:"input",attrs:{type:"text",pattern:"^(\\+[0-9]{0,2})?0?[0-9]{10}$",className:"form-control",name:"mobile",required:!1,value:""},config:{disabledAttrs:["type","template","pattern"],label:(0,d.getString)("mobile")},meta:{group:"advance",icon:"mobile",id:"mobile"},fMap:"attrs.value"},{tag:"select",config:{label:(0,d.getString)("country"),disabledAttrs:["template"]},attrs:{required:!1,name:"country",className:"form-control",style:""},meta:{group:"advance",icon:"flag",id:"country"}},{tag:"input",attrs:{type:"text",required:!1,className:"form-control",style:""},config:{disabledAttrs:["type","template"],label:(0,d.getString)("address"),composite:!0},meta:{group:"advance",icon:"address-card",id:"address"},fMap:"attrs.value"},{tag:"input",attrs:{type:"text",pattern:"^((http|https)://)?(w{3}.)?[a-zA-Z]+.[a-zA-Z.]+.*$",required:!1,name:"website",value:""},config:{disabledAttrs:["type","template","pattern"],label:(0,d.getString)("website")},meta:{group:"advance",icon:"globe",id:"website"},fMap:"attrs.value"},{tag:"input",attrs:{type:"text",required:!0,name:"username",className:"form-control",style:""},config:{label:(0,d.getString)("username"),disabledAttrs:["type","template"]},meta:{group:"advance",icon:"user",id:"username"}},{tag:"input",attrs:{type:"password",required:!0,name:"password",className:"form-control",style:""},config:{label:(0,d.getString)("password"),disabledAttrs:["type","template"]},meta:{group:"advance",icon:"key",id:"password"}},{tag:"input",attrs:{type:"email",required:!1,name:"email",className:"form-control",style:""},config:{disabledAttrs:["type","template"],label:(0,d.getString)("email")},meta:{group:"standard",icon:"email",id:"email"},fMap:"attrs.value"},{tag:"input",attrs:{type:"file",required:!1,name:"",className:"form-control",style:""},config:{disabledAttrs:["type","template"],label:(0,d.getString)("fileUpload")},meta:{group:"advance",icon:"upload",id:"upload"},fMap:"attrs.value"},{tag:"input",attrs:{type:"hidden",name:"",value:""},config:{label:(0,d.getString)("hidden"),disabledAttrs:["type","template"],hideLabel:!0,disabledControl:!0},meta:{group:"standard",icon:"hidden",id:"hidden"},fMap:"attrs.value"},{tag:"datalist",config:{label:(0,d.getString)("datalist"),hideLabel:!0,showLabelEdit:!0,editable:!0},meta:{group:"standard",icon:"datalist",id:"datalist"},fMap:"attrs.value",attrs:{id:"datalist"},options:[1,2,3,4].map((function(e){return{value:"Option - "+e}}))},{tag:"div",attrs:{className:"g-recaptcha"},config:{disabledAttrs:["template","className"],recaptcha:!0,label:(0,d.getString)("reCaptcha"),single:!0},meta:{group:"advance",icon:"repeat",id:"recaptcha"}},{tag:"input",attrs:{type:"text",name:"website",pattern:"((http|https)://)?(w{3}.)?[a-zA-Z]+.[a-zA-Z.]+.*",required:!1,value:""},config:{disabledAttrs:["type","template","pattern"],label:(0,d.getString)("website")},meta:{group:"advance",icon:"website",id:"website"},fMap:"attrs.value"},{tag:"a",attrs:{className:"",href:M.cfg.wwwroot+"/login/index.php",style:""},config:{label:(0,d.getString)("login"),editable:!0,hideLabel:!0},meta:{group:"advance",icon:"link",id:"loginlink"},content:(0,d.getString)("login")},{tag:"a",attrs:{className:"",href:M.cfg.wwwroot+"/login/signup.php",style:""},config:{label:(0,d.getString)("register"),editable:!0,hideLabel:!0},meta:{group:"advance",icon:"link",id:"registerlink"},content:(0,d.getString)("register")},{tag:"a",attrs:{className:"",href:"#",style:""},config:{label:(0,d.getString)("link"),editable:!0,hideLabel:!0},meta:{group:"html",icon:"link",id:"link"},content:"Link"},{tag:"h1",attrs:{tag:[{value:"h1",label:"H1"},{value:"h2",label:"H2"},{value:"h3",label:"H3"},{value:"h4",label:"H4"},{value:"h5",label:"H5"},{value:"h6",label:"H6"}],className:"",style:""},config:{label:(0,d.getString)("header"),editable:!0,hideLabel:!0},meta:{group:"html",icon:"header",id:"header"},content:(0,d.getString)("header")},{tag:"p",attrs:{className:"",style:""},config:{label:(0,d.getString)("paragraph"),hideLabel:!0,editable:!0},meta:{group:"html",icon:"paragraph",id:"paragraph"},content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed iaculis quam et ipsum interdum vehicula. Cras molestie eleifend ligula eget."},{tag:"hr",config:{label:(0,d.getString)("separator"),hideLabel:!0},meta:{group:"html",icon:"divider",id:"divider"}}],m=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=this;this.formID=n;var o=t.groupOrder,r=void 0===o?[]:o;this.groupOrder=(0,d.unique)(r.concat(["standard","advance","html","layout"])),this.cPosition={},this.defaults={sortable:!0,elementOrder:{},groups:[{id:"layout",label:(0,d.getString)("layout"),elementOrder:["row","column"]},{id:"standard",label:(0,d.getString)("standardFields"),elementOrder:["button","checkbox"]},{id:"advance",label:(0,d.getString)("advanceFields"),elementOrder:[]},{id:"html",label:(0,d.getString)("htmlElements"),elementOrder:["header","block-text"]}],disable:{groups:[],elements:[]},elements:[]},(g=c.default.merge(this.defaults,t)).elements=g.elements.concat(p),g.elements=this.filterDisabledControls(g.elements),this.controlEvents={click:function(e){return a.addElement(e.target)}},this.buildDOM()}return r(e,[{key:"applyControlEvents",value:function(e){var t=e.item,n=e.clone;n.classList.remove("sortable-choosen"),n.style.display="block";for(var a,o=document.getElementById(t.id).querySelector("button"),r=Object.keys(this.controlEvents),i=r.length-1;0<=i;i--)a=r[i],o.addEventListener(a,this.controlEvents[a])}},{key:"prepElement",value:function(e){var t=(0,d.uuid)(),n={tag:"button",attrs:{className:"btn btn-primary",type:"button"},content:[e.config.label],action:this.controlEvents},a={tag:"li",className:["px-0","py-5","list-group-item","field-control",e.meta.group+"-control",e.meta.id+"-control"],id:t,cPosition:{},content:n};return e.meta.icon&&n.content.unshift(f.default.icon(e.meta.icon)),l.registeredFields[t]=l.registeredFields[e.meta.id]=e,a}},{key:"filterDisabledControls",value:function(e){var t=[];return c.default.forEach(e,(function(e){1==e.config.disabledControl||t.push(e)})),t}},{key:"groupElements",value:function(){var e=this,t=this,n=g.groups.slice(),a=g.elements.slice(),o=[];return n=n.filter((function(e){return(0,d.match)(e.id,g.disable.groups)})),c.default.map(n,(function(r){var i={tag:"div",className:"control-label",content:[{tag:"h4",content:[n[r].label||"",{tag:"i",attrs:{className:"fa fa-angle-right","aria-hidden":"true"}}],action:{click:function(e){var t=e.target;"I"==t.tagName&&(t=t.parentElement);var n=t.parentElement.parentElement,a=t.parentElement.nextSibling;if(n.classList.contains("collapsed-controls")){if(!c.default.get(e,"detail.fAction"))t.parentElement.parentElement.parentElement.querySelectorAll(".control-label h4").forEach((function(n){n==t||n.parentElement.parentElement.classList.contains("collapsed-controls")||(e=new CustomEvent("click",{target:n,detail:{fAction:"collapse-only"}}),n.dispatchEvent(e))}));n.classList.remove("collapsed-controls"),a.style.height="auto";var o=a.clientHeight+"px";a.style.height="0px",setTimeout((function(){a.style.height=o}),0)}else a.style.height="0px",a.addEventListener("transitionend",(function(){n.classList.add("collapsed-controls")}),{once:!0})}}}]},l={tag:"ul",attrs:{className:["control-list","list-group"],id:t.formID+"-"+n[r].id+"-control-list"},fType:"controlGroup"};if(g.elementOrder[n[r].id]){var s=g.elementOrder[n[r].id],u=(0,d.unique)(s.concat(n[r].elementOrder));n[r].elementOrder=u}return l.content=a.filter((function(e){var t,a=e.meta.id||"";return(t=[(0,d.match)(a,g.disable.elements),e.meta.group===n[r].id,!c.default.inArray(e.meta.id,o)].every((function(e){return!0===e})))&&o.push(a),t})).map((function(n){return t.prepElement.call(e,n)})),{tag:"div",className:"control-group collapsed-controls",content:[i,l]}}))}},{key:"buildDOM",value:function(){if(this.element)return this.element;var e=this,t=this.groupElements(),n=["control-groups","panels-wrap","panel-count-"+t.length],a=f.default.create({tag:"div",className:n,content:t}),o=f.default.create({tag:"div",className:this.formID+"-controls formeo-controls",content:[{tag:"div",className:"controls-toggle bg-primary",content:[{tag:"i",attrs:{className:"fa fa-angle-right","aria-hidden":"true"}}],action:{click:function(e){var t=(0,d.closest)(e.target,"formeo");t.parentElement.classList.toggle("hidden-controls"),document.querySelector("#efb-cont-form-preview .efb-form-style-container").parentElement.classList.toggle("show-styles"),f.default.repositionPanels(t),document.dispatchEvent(new CustomEvent("controlsCollapsed",{detail:{collapsed:t.parentElement.classList.contains("hidden-controls")}}))}}},a]}),r=o.getElementsByClassName("control-list");this.element=o,this.groups=r,this.currentGroup=r[0],this.actions={addElement:e.addElement,addGroup:function(e){return console.log(e)}};for(var l=function(t){var n="formeo-controls-"+r[t];g.sortable||localStorage.removeItem(n),i.default.create(r[t],{animation:150,forceFallback:c.default.isFireFoxEdge(),fallbackClass:"control-moving",fallbackOnBody:!0,group:{name:"controls",pull:"clone",put:!1},onRemove:e.applyControlEvents.bind(e),sort:!1,store:{get:function(){var e=localStorage.getItem(n);return e?e.split("|"):[]},set:function(e){var t=e.toArray();localStorage.setItem(n,t.join("|"))}}})},s=r.length-1;0<=s;s--)l(s);return o}},{key:"addElement",value:function(e){if("available"==f.default.license){for(;!e.classList.contains("field-control");)e=e.parentElement;var t=e.id,n=f.default.addRow();if(e.classList.contains("layout-tab-control"))l.formData.settings.set("tabSettings",f.default.getTabDefaultConfigs()),f.default.createTabContainer(n);else{var a=c.default.get(l.registeredFields[t],"meta");if("layout"!==a.group){var o=f.default.addColumn(n.id);f.default.addField(o.id,t)}else"layout-column"===a.id&&f.default.addColumn(n.id);l.data.saveColumnOrder(n),f.default.columnWidths(n)}f.default.checkSingle(),l.data.save()}else f.default.proWarning(e.textContent)}}]),e}();t.Controls=m,t.defaultElements=p,t.addCompositeFields=function(e,t){var n=t.meta.id,a={name:function(){var t=o(e,!0,!0),n=new s.default("text-input",null,{attrs:{name:"firstname"},config:{label:(0,d.getString)("firstname")}}),a=new s.default("text-input",null,{attrs:{name:"lastname"},config:{label:(0,d.getString)("lastname")}}),r=void 0,i=void 0;return 1==t.dir?(r=a,i=n):(r=n,i=a),t.column.appendChild(r),f.default.emptyClass(t.column),l.data.saveFieldOrder(t.column),f.default.emptyClass(t),i},address:function(){var t=o(e,!0,!0),n=new s.default("text-input",null,{attrs:{name:"city"},config:{label:(0,d.getString)("city")}}),a=new s.default("country",null,{attrs:{name:"country"},config:{label:(0,d.getString)("country")}}),r=void 0,i=void 0;return 1==t.dir?(r=a,i=n):(r=n,i=a),t.column.appendChild(r),f.default.emptyClass(t.column),l.data.saveFieldOrder(t.column),f.default.emptyClass(t),i}};return c.default.get(a,n)?a[n]():new s.default(n)}},function(e){var t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e){function t(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function a(e){if(s===setTimeout)return setTimeout(e,0);if((s===t||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function o(){g&&d&&(g=!1,d.length?f=d.concat(f):p=-1,f.length&&r())}function r(){if(!g){var e=a(o);g=!0;for(var t=f.length;t;){for(d=f,f=[];++p<t;)d&&d[p].run();p=-1,t=f.length}d=null,g=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function i(e,t){this.fun=e,this.array=t}function l(){}var s,c,u=e.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:t}catch(e){s=t}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(e){c=n}}();var d,f=[],g=!1,p=-1;u.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new i(e,t)),1!==f.length||g||a(r)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=l,u.addListener=l,u.once=l,u.off=l,u.removeListener=l,u.removeAllListeners=l,u.emit=l,u.prependListener=l,u.prependOnceListener=l,u.listeners=function(){return[]},u.binding=function(){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(4)),i=n(3),l=a(n(2)),s=a(n(0)),c=n(1),u={},d=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.stageID=n||(0,c.uuid)();var a=i.formData.stages.get(this.stageID),o=(0,c.getString)("stepindex");o=o.replace("{{index}}",i.formData.stages.size+1),a&&(o=a.title);var r={title:o,formSettings:[{tag:"input",id:"form-title",attrs:{className:"form-title",placeholder:(0,c.getString)("UntitledForm"),value:o,type:"text"},config:{label:(0,c.getString)("FormTitle")}},{tag:"input",id:"form-novalidate",attrs:{className:"form-novalidate",value:!1,type:"checkbox"},config:{label:(0,c.getString)("Formnovalidate")}},{tag:"input",id:"form-tags",attrs:{className:"form-tags",type:"text"},config:{label:(0,c.getString)("Tags")}}]};if(u=Object.assign(u,r,t),!i.formData.stages.get(this.stageID)){var l={title:u.title,id:this.stageID,settings:{},rows:[]};i.formData.stages.set(this.stageID,l)}return this.loadStage()}return o(e,[{key:"loadStage",value:function(){var e=this,t=this.dom,n=r.default.create(t.childNodes[0],{animation:150,scroll:!0,scrollSensitivity:1e3,direction:"horizontal",fallbackClass:"row-moving",forceFallback:l.default.isFireFoxEdge(),fallbackTolerance:0,group:{name:"stages",pull:!0,put:["controls","rows","columns"]},onAdd:e.onAdd.bind(e),onRemove:e.onRemove.bind(e),sort:!0,onStart:function(){s.default.activeStage=e.stage},onUpdate:function(){i.data.saveRowOrder(),i.data.save()},onSort:e.onSort,draggable:".stage-rows",handle:".item-handle"});return s.default.stages.set(this.stageID,{stage:this.stage,sortable:n}),s.default.activeStage=this.stage,i.formData.stages.get(this.stageID).rows.length&&s.default.loadRows(this.stage),t}},{key:"elementConfigs",value:function(){var e=this,t={header:{tag:"label",content:i.formData.stages.get(this.stageID).title||(0,c.getString)("untitled"),attrs:{id:"for-"+e.stageID,contenteditable:!0},className:"stage-label",action:{focusout:function(e){var t=e.target.id,n=e.target.innerText||e.target.textContent;t=t.replace("for-",""),i.data.saveStageLabel(t,n)}}},stage:{tag:"ul",attrs:{className:["stage","empty-stages"],id:e.stageID},fType:"stages",content:[]},settings:{tag:"div",attrs:{className:"formeo-settings",id:e.stageID+"-settings"},fType:"settings"}};return t.settings.content=u.formSettings.slice(),t}},{key:"onSort",value:function(){i.data.save()}},{key:"onAdd",value:function(e){s.default.activeStage=this.stage;var t=e.from,n=e.item,a=e.to,o=l.default.indexOfNode(n,a);if(n.classList.contains("layout-tab-control")){if("available"!=s.default.license){var r=e.item.firstChild.lastChild.wholeText;return r=(0,c.getString)("dragndrop",r),s.default.proWarning(r),s.default.remove(n),s.default.emptyClass(s.default.activeStage),i.data.save()}i.formData.settings.set("tabSettings",s.default.getTabDefaultConfigs()),s.default.createTabContainer(n)}else{var u="stages"===t.fType?n:s.default.addRow(),d="columns"===t.fType,f="rows"===t.fType,g=void 0;if("controlGroup"===t.fType){if("available"!=s.default.license){var p=e.item.firstChild.lastChild.wholeText;return p=(0,c.getString)("dragndrop",p),s.default.proWarning(p),s.default.remove(n),s.default.remove(u),s.default.emptyClass(s.default.activeStage),i.data.save()}var m=i.registeredFields[n.id].meta;"layout"===m.group?"layout-column"===m.id&&s.default.addColumn(u.id):(g=s.default.addColumn(u.id),s.default.addField(g.id,n.id,"drag")),s.default.remove(n)}else if(d){var v=s.default.addColumn(u.id);v.appendChild(n),i.data.saveFieldOrder(v),s.default.emptyClass(v)}else f&&(u.appendChild(n),i.data.saveColumnOrder(u),s.default.emptyClass(u));a.insertBefore(u,a.children[o]),s.default.columnWidths(u),i.data.saveRowOrder(a)}return s.default.checkSingle(),i.data.save()}},{key:"onRemove",value:function(){return i.data.save()}},{key:"dom",get:function(){var e=this;if(e.stage)return e.stage;var t=e.elementConfigs(),n=s.default.create({tag:"div",attrs:{className:"stage-wrap tab-pane",id:t.stage.attrs.id,role:"tabpanel"},content:[t.stage,t.settings],fType:"stages"});return e.stage=n.childNodes[0],n}}]),e}();t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(0)),i=n(3),l=a(n(5)),s=n(1),c=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"getElementFromCondition",value:function(e){var t=e.content[0].options;if(2>t.length)return{status:!1};var n=e.content[1].options;if(0==n.length)return{status:!1};var a=e.content[2].options,o=null,i=null,l=null;if(0<t.length){o=t[0].value;for(var s=0;s<t.length;s++)if(1==t[s].selected){o=t[s].value;break}if(0==(o=r.default.renderTarget.querySelectorAll('[id*="'+o+'"]')).length)return{status:!1}}if(0<n.length){i=n[0].value;for(var c=0;c<n.length;c++)if(1==n[c].selected){i=n[c].value;break}}if(0<a.length){l=a[0].value;for(var u=0;u<a.length;u++)if(1==a[u].selected){l=a[u].value;break}}return{status:!0,source:o,value:i,operator:l}}},{key:"getConditionChangedValue",value:function(e){var t=(0,s.elementTagType)(e[0]);switch(t.tag){case"SELECT":return e[0].value;case"INPUT":if("radio"==t.type){for(var n=0;n<e.length;n++)if(e[n].checked)return e[n].value;return null}}return null}},{key:"executeCondition",value:function(e,t){var n=null,a=void 0,o=void 0,r=void 0,i=void 0;for(0<e.length&&(o=e[0],n=(i=c.getConditionChangedValue(o.source))==o.value),r=1;r<e.length-1;r++)switch(o=e[r],i=c.getConditionChangedValue(o.source),a=i==o.value,e[r-1].operator){case"AND":n=n&&a;break;case"OR":n=n||a}if(r<e.length)switch(o=e[r],i=c.getConditionChangedValue(o.source),a=i==o.value,e[r-1].operator){case"AND":n=n&&a;break;case"OR":n=n||a}1==n?t.classList.remove("d-none"):t.classList.add("d-none")}},{key:"processEachCondition",value:function(e,t){for(var n=[],a=void 0,o=void 0,r=void 0,i=0;i<e.length;i++)a=e[i],1==(o=c.getElementFromCondition(a)).status&&n.push(o);0!=n.length&&t.classList.add("d-none");for(var l=0;l<n.length;l++)switch(o=n[l],r=(0,s.elementTagType)(o.source[0]),r.tag){case"SELECT":o.source[0].addEventListener("change",(function(){c.executeCondition(n,t)})),c.executeCondition(n,t);break;case"INPUT":if("radio"==r.type)for(var u=0;u<o.source.length;u++)o.source[u].addEventListener("click",(function(){c.executeCondition(n,t)})),c.executeCondition(n,t)}}},{key:"applyConditions",value:function(e){e.forEach((function(e){var t=e.id;if(0<e.conditions.length){var n=r.default.renderTarget.querySelector('[id="'+t+'"]');c.processEachCondition(e.conditions,n)}}))}},{key:"conditionPositions",value:function(e,t){var n=void 0,a=void 0;return n=(n=(0,s.closest)(e.target,"panel-conditions").getElementsByClassName("conditions")[0]).childNodes,"add"===t?a=n[n.length-1]:("source"===t||"value"===t||"operator"===t||"delete"===t)&&(a=(0,s.closest)(e.target,"condition")),{row:(0,s.closestFtype)(e.target),conditionIndex:Array.prototype.indexOf.call(n,a),condition:a.childNodes[0],type:t}}},{key:"conditionSourceChange",value:function(e){var t=e.target.value,n={tag:"select",attrs:{type:"select"},options:[]};"choose"!=t&&(n.options=i.formData.fields.get(t).options);var a=e.target.nextSibling;if(a.innerHTML="",0<n.options.length){for(var o=(n=r.default.create(n)).childNodes;o.length;)a.appendChild(o[0]);a.firstChild.selected=!0}}},{key:"removeCondition",value:function(){return{tag:"button",attrs:{className:"condition-delete condition-control btn btn-danger",title:(0,s.getString)("remove-condition")},content:r.default.icon("remove"),action:{click:function(e){e.preventDefault();var t=e.target.parentElement.parentElement,n=(0,s.closest)(e.target,"conditions");l.default.slideUp(t,666,(function(t){var a=c.conditionPositions(e,"delete");r.default.remove(t),c.resizeConditions(n),i.data.saveConditionalLogics(a,"delete")}))}}}}},{key:"wrapCondition",value:function(e){var t=e.content[0],n=e.content[1],a=e.content[2];return t.action={change:function(e){c.conditionSourceChange(e);var t=c.conditionPositions(e,"source");i.data.saveConditionalLogics(t),t=c.conditionPositions(e,"value"),i.data.saveConditionalLogics(t)}},n.action={change:function(e){var t=c.conditionPositions(e,"value");i.data.saveConditionalLogics(t)}},a.action={change:function(e){var t=c.conditionPositions(e,"operator");i.data.saveConditionalLogics(t)}},e.content[0]=t,e.content[1]=n,e.content[2]=a,{tag:"li",className:"condition",content:[e,{tag:"div",className:"condition-controls",content:[c.removeCondition]}]}}},{key:"filterFieldsSelectRadio",value:function(e){var t=[];return i.formData.fields.forEach((function(n){e.includes(n.id)&&("select"==n.tag||"input"==n.tag&&"radio"==n.attrs.type)&&t.push(n)})),t}},{key:"getConditionValidFields",value:function(e){var t=[],n=[];return i.formData.rows.forEach((function(t){t.id!=e&&(n=n.concat(t.columns))})),n.length&&i.formData.columns.forEach((function(e){n.includes(e.id)&&(t=t.concat(e.fields))})),t=this.filterFieldsSelectRadio(t)}},{key:"addCondition",value:function(e,t){for(var n=this.getConditionValidFields(e),a=[{label:(0,s.getString)("condition-choose-source"),value:"choose",selected:!0}],o=0;o<n.length;o++)a.push({label:n[o].config.label,value:n[o].id});var l=this.wrapCondition({tag:"div",className:"condition-inputs",content:[{tag:"select",className:"condition-source condition-input",options:a},{tag:"select",className:"condition-value condition-input"},{tag:"select",className:"condition-operator condition-input",options:[{label:"AND",value:"AND",selected:!0},{label:"OR",value:"OR"}],action:{change:function(e){var t=c.conditionPositions(e,"operator");i.data.saveConditionalLogics(t)}}}]});t.append(r.default.create(l))}},{key:"resizeConditions",value:function(e){var t=(0,s.closest)(e,"panel-conditions"),n=(0,s.closest)(e,"panels"),a=l.default.getStyle(t,"height");n.style.height=a}},{key:"processConditions",value:function(e){for(var t=e.conditions,n=void 0,a=[],o=0;o<t.length;o++)n=t[o],n=this.wrapCondition(n),a.push(n);return a}},{key:"conditions",value:function(e){return[{tag:"div",className:"f-panel-wrap",content:[{tag:"ul",className:"conditions",content:[c.processConditions(e)]}]},{tag:"div",className:"panel-action-buttons",content:[{tag:"button",className:"add-condition btn btn-primary",content:(0,s.getString)("addcondition"),action:{click:function(e){e.preventDefault();var t=e.target.parentElement.parentElement.getElementsByClassName("conditions")[0],n=(0,s.closestFtype)(e.target);c.addCondition(n.id,t),c.resizeConditions(e.target);var a=c.conditionPositions(e,"add");i.data.saveConditionalLogics(a)}}}]}]}}]),e}());t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(4)),i=n(3),l=a(n(2)),s=a(n(6)),c=a(n(0)),u=n(1),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this,a=n.columnID=t||(0,u.uuid)();n.columnData=i.formData.columns.get(a),i.formData.columns.set(a,l.default.merge({fields:[],id:a,config:{},className:[]},n.columnData));var o={tag:"li",className:"resize-x-handle",action:{mousedown:n.resize,touchstart:n.resize},content:[c.default.icon("triangle-down"),c.default.icon("triangle-up")]},d={tag:"ul",className:["stage-columns","empty-columns"],dataset:{hoverTag:(0,u.getString)("column")},action:{mouseup:function(e){var t=e.target.parentElement;t.resizing&&(t.resizing=!1,t.parentElement.classList.remove("resizing-columns"))}},id:n.columnID,content:[c.default.actionButtons(n.columnID),{tag:"li",className:"column-edit group-config"},o],fType:"columns"};d=c.default.create(d),this.processConfig(d),s.default.columnResized=new CustomEvent("columnResized",{detail:{column:d,instance:n}});var f=this.sortable=r.default.create(d,{animation:150,fallbackClass:"field-moving",forceFallback:l.default.isFireFoxEdge(),group:{name:"columns",pull:!0,put:["columns","controls"],revertClone:!0},sort:!0,onEnd:n.onEnd,onAdd:n.onAdd,onSort:n.onSort,onRemove:n.onRemove,draggable:".stage-fields",handle:".item-handle"});return c.default.columns.set(a,{column:d,sortable:f}),d}return o(e,[{key:"onSort",value:function(e){return i.data.saveFieldOrder(e.target)}},{key:"processConfig",value:function(e){var t=i.formData.columns.get(this.columnID);t.config.width&&(e.dataset.colWidth=t.config.width,e.style.width=t.config.width,e.style.float="left")}},{key:"onAdd",value:function(e){var t=e.from,n=e.item,a=e.to;if(n.classList.contains("layout-tab-control"))if("available"!=c.default.license){var o=e.item.firstChild.lastChild.wholeText;o=(0,u.getString)("dragndrop",o),c.default.remove(e.item),c.default.proWarning(o)}else i.formData.settings.set("tabSettings",c.default.getTabDefaultConfigs()),c.default.createTabContainer(n);else{var r="columns"===t.fType;if("controlGroup"===t.fType){if("available"!=c.default.license){var s=e.item.firstChild.lastChild.wholeText;s=(0,u.getString)("dragndrop",s),c.default.proWarning(s)}else{var d=l.default.get(i.registeredFields[n.id],"meta");if("layout"!==d.group){var f=c.default.addField(a.id,n.id);a.insertBefore(f,a.childNodes[e.newIndex]),i.data.saveFieldOrder(a),i.data.save("fields",a.id)}else if("layout-column"===d.id){var g=a.parentElement;c.default.addColumn(g.id),c.default.columnWidths(g)}}c.default.remove(e.item)}c.default.fieldOrderClass(a),r&&c.default.fieldOrderClass(t),c.default.emptyClass(e.to),i.data.save(),a.classList.remove("hovering-column")}c.default.checkSingle()}},{key:"onRemove",value:function(e){e.from.parent&&(c.default.columnWidths(e.from.parentElement),i.data.saveColumnOrder(e.from.parentElement)),c.default.emptyClass(e.from)}},{key:"onEnd",value:function(e){var t=e.to,n=e.from;return n.classList.contains("empty-columns")?void c.default.removeEmpty(e.from):(c.default.fieldOrderClass(t),c.default.fieldOrderClass(n),n.parent&&c.default.columnWidths(n.parentElement),i.data.save(),void(t&&t.classList.remove("hovering-column")))}},{key:"resize",value:function(e){var t={},n=e.target.parentElement,a=n.nextSibling||n.previousSibling,o=n.parentElement,r=c.default.getStyle(o),l=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),s=void 0,d=void 0;t.move=function(e){(function(e){var o="touchmove"===e.type?e.touches[0].clientX:e.clientX,r=t.colStartWidth+o-t.startX,i=t.sibStartWidth-o+t.startX,l=function(e){return e/t.rowWidth*100};s=parseFloat(l(r)),d=parseFloat(l(i)),n.dataset.colWidth=(0,u.numToPercent)(s.toFixed(1)),a.dataset.colWidth=(0,u.numToPercent)(d.toFixed(1)),n.style.width=(0,u.numToPercent)(s),a.style.width=(0,u.numToPercent)(d)})(e),t.resized=!0},t.stop=function(){if(window.removeEventListener("mousemove",t.move),window.removeEventListener("mouseup",t.stop),window.removeEventListener("touchmove",t.move),window.removeEventListener("touchend",t.stop),t.resized){var e=i.formData.columns.get(n.id),o=i.formData.columns.get(a.id),r=n.parentElement;r.querySelector(".column-preset").value="custom",r.classList.remove("resizing-columns"),e.config.width=n.dataset.colWidth,o.config.width=a.dataset.colWidth,t.resized=!1,i.data.save()}},t.start=function(e){t.startX="touchstart"===e.type?e.touches[0].clientX:e.clientX,o.classList.add("resizing-columns");var r=/\bcol-\w+-\d+/g;n.className.replace(r,""),a.className.replace(r,""),t.colStartWidth=n.offsetWidth||c.default.getStyle(n,"width"),t.sibStartWidth=a.offsetWidth||c.default.getStyle(a,"width"),t.rowWidth=o.offsetWidth-l,window.addEventListener("mouseup",t.stop,!1),window.addEventListener("mousemove",t.move,!1),window.addEventListener("touchend",t.stop,!1),window.addEventListener("touchmove",t.move,!1)}(e)}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o={add:{attr:function(e){a.default.addAttributePrompt("primary",e.message.attr,e.addAction)},option:function(e){e.addAction()}},click:{btn:function(e){e.action()}},save:function(){return!0}},r={init:function(e){return this.opts=Object.assign({},o,e),this},add:{attrs:function(e){r.opts.add.attr(e)},options:function(e){r.opts.add.option(e)}},click:{btn:function(e){r.opts.click.btn(e)}},save:function(){return!0}};t.default=r},function(e,t,n){n(17),e.exports=n(18)},function(e,t,n){(function(t,n){!function(t){"use strict";function a(e,t,n,a){var o=Object.create((t||r).prototype),i=new p(a||[]);return o._invoke=d(e,n,i),o}function o(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function i(){}function l(){}function s(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function c(e){this.arg=e}function u(e){function t(t,n){var a=e[t](n),i=a.value;return i instanceof c?Promise.resolve(i.arg).then(o,r):Promise.resolve(i).then((function(e){return a.value=e,a}))}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var a,o=t.bind(e,"next"),r=t.bind(e,"throw");t.bind(e,"return");this._invoke=function(e,n){function o(){return t(e,n)}return a=a?a.then(o,o):new Promise((function(e){e(o())}))}}function d(e,t,n){var a=S;return function(r,i){if(a==E)throw new Error("Generator is already running");if(a==k){if("throw"===r)throw i;return{value:void 0,done:!0}}for(;;){var l=n.delegate;if(l){if("return"===r||"throw"===r&&void 0===l.iterator[r]){n.delegate=null;var s=l.iterator.return;if(s)if("throw"===(c=o(s,l.iterator,i)).type){r="throw",i=c.arg;continue}if("return"===r)continue}var c;if("throw"===(c=o(l.iterator[r],l.iterator,i)).type){n.delegate=null,r="throw",i=c.arg;continue}if(r="next",i=void 0,!(u=c.arg).done)return a=C,u;n[l.resultName]=u.value,n.next=l.nextLoc,n.delegate=null}if("next"===r)n._sent=i,n.sent=a==C?i:void 0;else if("throw"===r){if(a==S)throw a=k,i;n.dispatchException(i)&&(r="next",i=void 0)}else"return"===r&&n.abrupt("return",i);if(a=E,"normal"===(c=o(e,t,n)).type){a=n.done?k:C;var u={value:c.arg,done:n.done};if(c.arg!==N)return u;n.delegate&&"next"===r&&(i=void 0)}else"throw"===c.type&&(a=k,r="throw",i=c.arg)}}}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function g(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function m(e){if(e){var t=e[y];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(h.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:v}}function v(){return{value:void 0,done:!0}}var h=Object.prototype.hasOwnProperty,y="function"==typeof Symbol&&Symbol.iterator||"@@iterator",b="object"==typeof e,w=t.regeneratorRuntime;if(w)b&&(e.exports=w);else{(w=t.regeneratorRuntime=b?e.exports:{}).wrap=a;var S="suspendedStart",C="suspendedYield",E="executing",k="completed",N={},D=l.prototype=r.prototype;i.prototype=D.constructor=l,l.constructor=i,i.displayName="GeneratorFunction",w.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},w.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):e.__proto__=l,e.prototype=Object.create(D),e},w.awrap=function(e){return new c(e)},s(u.prototype),w.async=function(e,t,n,o){var r=new u(a(e,t,n,o));return w.isGeneratorFunction(t)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},s(D),D[y]=function(){return this},D.toString=function(){return"[object Generator]"},w.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},w.values=m,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=void 0,this.done=!1,this.delegate=null,this.tryEntries.forEach(g),!e)for(var t in this)"t"===t.charAt(0)&&h.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,a){return r.type="throw",r.arg=e,n.next=t,!!a}if(this.done)throw e;for(var n=this,a=this.tryEntries.length-1;0<=a;--a){var o=this.tryEntries[a],r=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var i=h.call(o,"catchLoc"),l=h.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n,a=this.tryEntries.length-1;0<=a;--a)if((n=this.tryEntries[a]).tryLoc<=this.prev&&h.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?this.next=o.finallyLoc:this.complete(r),N},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if((t=this.tryEntries[n]).finallyLoc===e)return this.complete(t.completion,t.afterLoc),g(t),N},catch:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if((t=this.tryEntries[n]).tryLoc===e){var a=t.completion;if("throw"===a.type){var o=a.arg;g(t)}return o}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:m(e),resultName:t,nextLoc:n},N}}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n(10),n(11))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=a(n(5)),l=a(n(2)),s=n(1),c=n(3),u=a(n(6)),d=a(n(15)),f=a(n(0)),g=n(9),p=a(n(8)),m=a(n(12)),v=a(n(23));n(24),n(25),n(26),n(27);var h={get formData(){return c.data.json}},y={},b=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;o(this,e);var a={allowEdit:!0,dataType:"json",localStorage:!0,container:".formeo-wrap",prefix:"formeo-",iconFontFallback:null,events:{},actions:{},controls:{},config:{rows:{},columns:{},fields:{}}},r=this;return f.default.countries=t.countries,r.container=t.container||a.container,f.default.container=r.container,f.default.sitekey=t.sitekey||"",f.default.license=t.license||"unavailable",this.resetable=t.resetable||!1,this.resetForm=t.resetForm||!1,"string"==typeof r.container&&(r.container=document.querySelector(r.container)),delete t.container,y=l.default.merge(a,t),c.data.init(y,n),u.default.init(y.events),d.default.init(y.actions),h.dom=f.default,h.reset=c.data.reset,h.addMissingField=this.addMissingField,h.validator=v.default,f.default.setConfig=y.config,h.render=function(e){f.default.renderForm(e)},y.allowEdit&&(h.edit=this.init,this.init()),h}return r(e,[{key:"getFormSettings",value:function(){var e=f.default.getFormDefaultSettings(),t=(0,s.clone)(e);null!=c.formData.settings.get("formSettings")&&Object.keys(t).forEach((function(e){Object.assign(t[e],c.formData.settings.get("formSettings")[e])})),c.formData.settings.set("formSettings",t),c.data.save();var n={tag:"ul",attrs:{className:"form-settings-edit"},content:[]};return Object.keys(t).forEach((function(a){var o=f.default.getConfigContainer(a,!1);Object.keys(t[a]).forEach((function(n){o.content[1].content.push(f.default.getSettingItem(n,t[a][n],e[a][n],"formSettings","form-config",a))})),n.content.push(o)})),n}},{key:"getFormSettingControl",value:function(){var e=this,t={tag:"button",content:f.default.icon("edit"),attrs:{className:["btn btn-primary item-edit-toggle"],type:"button",title:(0,s.getString)("edit-form")},meta:{id:"edit"},action:{click:function(e){var t=(0,s.closest)(e.target,"formeo-editor"),n="form-settings",a="editing-"+n,o=t.querySelector("."+n+"-edit");t.classList.contains(a)?i.default.slideUp(o,666,(function(){i.default.slideDown(o.nextSibling,666,(function(){t.classList.remove(a)}))})):i.default.slideUp(o.nextSibling,666,(function(){i.default.slideDown(o,666,(function(){t.classList.add(a)}))}))}}},n={tag:"button",content:[{tag:"i",attrs:{className:"fa fa-trash","aria-hidden":!0}}],attrs:{className:"btn btn-danger item-delete-form",type:"button",title:(0,s.getString)("delete-form")},action:{click:function(e){if(c.formData.rows.size||c.formData.stages.size){var t=new CustomEvent("confirmClearAll",{detail:{confirmationMessage:(0,s.getString)("confirmclearform"),clearAllAction:f.default.clearForm.bind(f.default),btnCoords:f.default.coords(e.target),rows:f.default.rows,rowCount:f.default.rows.size}});document.dispatchEvent(t)}else f.default.alert("info",(0,s.getString)("nofields"))}},meta:{id:"delete"}},a={tag:"button",content:[{tag:"i",attrs:{className:"fa fa-repeat","aria-hidden":!0}}],attrs:{className:"btn btn-warning item-reset-form",type:"button",title:(0,s.getString)("reset-form")},action:{click:function(t){if(c.formData.rows.size||c.formData.stages.size){var n=new CustomEvent("confirmReset",{detail:{confirmationMessage:(0,s.getString)("confirmresetform"),resetAction:e.resetForm,btnCoFrds:f.default.coords(t.target),rows:f.default.rows,rowCount:f.default.rows.size}});document.dispatchEvent(n)}else f.default.alert("info",(0,s.getString)("nofields"))}},meta:{id:"delete"}},o=2,r=[];return r.push(n),this.resetable&&(o++,r.push(a)),r.push(t),{tag:"div",className:"form-settings-actions group-actions control-count-"+o,content:[{tag:"div",className:"action-btn-wrap",content:r}]}}},{key:"init",value:function(){return this.formID=c.formData.id,h.controls=new g.Controls(y.controls,this.formID),this.stages=this.buildStages(),this.formSettings=this.getFormSettings(),this.formSettingControl=this.getFormSettingControl(),this.render(),h}},{key:"buildStages",value:function(){var e=[],t=function(e){return new m.default(y,e)};return c.formData.stages.size?c.formData.stages.forEach((function(n,a){e.push(t(a))})):e.push(t()),e[0].classList.add("active"),e[0].classList.add("show"),e}},{key:"getImportFormView",value:function(){var e=this;return f.default.getImportFormContainer((function(){var t=document.getElementById("import-form-input"),n=document.querySelector(".import-form-error");n.innerHTML="";var a=t.files;if(0==a.length)return n.innerHTML="Please select file.",!1;var o=a[0];if("application/json"!=o.type)return n.innerHTML="Please select json file",!1;var r=new FileReader;return r.onload=function(t){try{var n=t.target.result;n=JSON.parse(n);var a=!0,o=!1,r=void 0;try{for(var i,l,u=Object.keys(n.definition)[Symbol.iterator]();!(a=(i=u.next()).done);a=!0)"id"!=(l=i.value)&&(n.definition[l]=(0,s.objToStrMap)(n.definition[l]))}catch(e){o=!0,r=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw r}}c.data.replaceFormData(n.definition),e.init(),e.render()}catch(e){f.default.alert("warning",e.message)}},r.readAsText(o),!0}))}},{key:"render",value:function(){var e=this,t=h.controls.element,n=[],a=!1;1<c.formData.stages.size&&(a=!0,n.push(f.default.getStageControl())),n.push(e.stages),n.push(this.getImportFormView());var o={tag:"div",className:"formeo formeo-editor tab-content",attrs:{id:e.formID},content:[t,{tag:"div",className:"form-wrapper",content:[e.formSettingControl,e.formSettings,{tag:"div",className:"form-container",content:n}]}]},r=f.default.create(o);e.container.innerHTML="",e.container.appendChild(r),document.getElementsByTagName("body")[0].onresize=function(){var e=document.getElementsByClassName("formeo-editor")[0];f.default.repositionPanels(e)},1<c.formData.stages.size&&f.default.tabSorting(),a&&(0,s.hideControl)("layout-tab-control"),f.default.toggleImportButton(),f.default.toggleFormDeleteAction(),f.default.checkSingle(),u.default.formeoLoaded=new CustomEvent("formeoLoaded",{detail:{formeo:h}}),document.dispatchEvent(u.default.formeoLoaded)}},{key:"addMissingField",value:function(e){var t=f.default.addRow(null,null),n=f.default.addColumn(t.id,null);e=new p.default(e.meta.id,null,e),n.appendChild(e),f.default.emptyClass(n),c.data.saveFieldOrder(n),f.default.columnWidths(t),c.data.saveColumnOrder(t)}}]),e}();void 0!==window&&(window.Formeo=b),t.default=b},function(e,t){t=e.exports=function(){for(var e,n="",a=0;32>a;a++)e=0|16*t.random(),4<a&&21>a&&!(a%4)&&(n+="-"),n+=(12===a?4:16===a?8|3&e:e).toString(16);return n};var n=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;t.isUUID=function(e){return n.test(e)},t.random=function(){return Math.random()}},function(e,t,n){"use strict";(function(t,n){function a(e){if(this instanceof a)throw new TypeError("Symbol is not a constructor");var t="@@symbol:"+(Math.random()+"").slice(2),n=Object.create(a.prototype,{_desc:{value:e,enumerable:!1,writable:!1,configurable:!1},_code:{value:t,enumerable:!1,writable:!1,configurable:!1}});return o(Object.prototype,t,{set:function(e){o(this,t,{value:e,enumerable:!1,writable:!0})}}),n}var o=Object.defineProperty;a.prototype.toString=function(){return this._code};var r={};a.for=function(e){return r[e+=""]||(r[e]=a(e))},a.keyFor=function(e){if(!(e instanceof a))throw new TypeError("Symbol.keyFor requires a Symbol argument");for(var t in r)if(r[t]===e)return t},e.exports=t.env.__SYMBOLJS_POLYFILL_FORCE?a:n.Symbol||a}).call(this,n(11),n(10))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(4)),i=a(n(0)),l=a(n(2)),s=n(3),c=n(1),u=a(n(7)),d=a(n(13)),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this,a=void 0,o=n.rowID=t||(0,c.uuid)(),d={columns:[],id:n.rowID,config:{fieldset:!1,legend:"",inputGroup:!1},attrs:{className:"f-row"},conditions:[]},f=s.formData.rows.get(o);s.formData.rows.set(o,l.default.merge(d,f));var g=new u.default({panels:n.editWindow.content,type:o});g.tag="div",g.className="row-edit panels-wrap tabbed-panels",g.action={click:function(e){var t=(0,c.closestFtype)(e.target),n=t.getElementsByClassName("row-edit")[0].getElementsByClassName("panel-labels")[0].getElementsByTagName("h5")[0],a=t.getElementsByClassName("stage-columns");if(t.classList.contains("editing-row")&&n.classList.contains("active-tab"))for(var o=0;o<a.length;o++)a[o].classList.remove("hide-column");else for(var r=0;r<a.length;r++)a[r].classList.add("hide-column")}},a={tag:"li",className:"stage-rows empty-rows",dataset:{hoverTag:(0,c.getString)("row"),editingHoverTag:(0,c.getString)("editing.row")},id:o,content:[i.default.actionButtons(o,"row"),g],fType:"rows"},a=i.default.create(a);var p=r.default.create(a,{animation:150,forceFallback:!0,fallbackClass:"column-moving",group:{name:"rows",pull:!0,put:["rows","controls","columns"]},sort:!0,onRemove:n.onRemove,onEnd:n.onEnd,onAdd:n.onAdd,onSort:n.onSort,draggable:".stage-columns",handle:".item-handle",filter:".resize-x-handle"});return i.default.rows.set(o,{row:a,sortable:p}),a}return o(e,[{key:"onSort",value:function(e){s.data.saveColumnOrder(e.target),s.data.save()}},{key:"onRemove",value:function(e){i.default.columnWidths(e.from),s.data.saveColumnOrder(e.target),i.default.emptyClass(e.from)}},{key:"onEnd",value:function(e){e.from.classList.contains("empty-rows")&&i.default.removeEmpty(e.from),s.data.save()}},{key:"onAdd",value:function(e){var t=e.from,n=e.item,a=e.to,o="rows"===t.fType,r="columns"===t.fType,u="controlGroup"===t.fType,d=void 0;if(o)d=n;else if(u){if("available"!=i.default.license){var f=e.item.firstChild.lastChild.wholeText;f=(0,c.getString)("dragndrop",f),i.default.proWarning(f)}else{var g=l.default.get(s.registeredFields[n.id],"meta");"layout"===g.group?"layout-column"===g.id&&i.default.addColumn(a.id):(d=i.default.addColumn(a.id),i.default.addField(d.id,n.id))}i.default.remove(n)}else r&&(d=i.default.addColumn(a.id),i.default.addField(d.id,n.id),n.parentElement.removeChild(n));s.data.saveColumnOrder(a),i.default.columnWidths(a),i.default.emptyClass(a),s.data.save()}},{key:"editWindow",get:function(){var e=this,t=s.formData.rows.get(e.rowID),n={tag:"div",className:"panels row-edit group-config"},a={tag:"label",content:(0,c.getString)("row.settings.fieldsetWrap")},o=[a,{tag:"div",className:"input-group",content:[{tag:"span",className:"input-group-addon",content:{tag:"input",id:e.rowID+"-fieldset",attrs:{type:"checkbox",checked:t.config.fieldset,ariaLabel:(0,c.getString)("row.settings.fieldsetWrap.aria")},action:{click:function(e){t.config.fieldset=e.target.checked,s.data.save()}}}},{tag:"input",attrs:{type:"text",ariaLabel:(0,c.getString)("legendfieldset"),value:t.config.legend,placeholder:"Legend"},action:{input:function(e){t.config.legend=e.target.value,s.data.save()}},className:""}]}];o=i.default.formGroup(o);var r=Object.assign({},a,{content:(0,c.getString)("columnwidths")}),l=Object.assign({},a,{content:"Layout Preset",className:"col-sm-4 form-control-label"}),u={tag:"div",className:"col-sm-8",content:i.default.columnPresetControl(e.rowID)},f=i.default.formGroup([l,u],"row"),g={tag:"div",className:"f-panel row-config",config:{label:(0,c.getString)("containersettings")},content:[o,i.default.create("hr"),r,f]},p={tag:"div",config:{label:(0,c.getString)("conditions")},className:"f-panel panel-conditions",content:[{tag:"div",className:"condition-recaptcha-warning",content:{tag:"center",content:{tag:"h4",attrs:{style:"margin: 1rem 0rem"},content:(0,c.getString)("recaptcha-row")}}},d.default.conditions(t)]};return n.content=[g,p],n}}]),e}();t.default=f},function(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n,a=0;a<t.length;a++)(n=t[a]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(3),i=a(n(0)),l=n(1),s=a(n(2)),c=[],u=[],d=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"validateOptions",value:function(e){if(!s.default.get(e,"options"))return!0;var t=!0;return e.options.forEach((function(e){0==t||(""==e.label&&(t=!1),""==e.value&&(t=!1))})),t}},{key:"getFieldLabelAndId",value:function(e){var t=e.config.label||"";return""!=t&&(t+=" - "),t+=(0,l.ucfirst)(e.meta.id)||""}},{key:"validate",value:function(){var e=this;c=[],u=[];var t=!0,n={input:function(t){var n=e.validateOptions(t);return""==(t.attrs.type||"")&&(c.push((0,l.getString)("input-invalid-type",e.getFieldLabelAndId(t))),n=!1),0==n&&c.push((0,l.getString)("input-"+(t.attrs.type||"all")+"-option-invalid",e.getFieldLabelAndId(t))),n},select:function(t){var n=e.validateOptions(t);return 0==n&&c.push((0,l.getString)("select-option-invalid",e.getFieldLabelAndId(t))),n}};return r.formData.fields.forEach((function(a){switch(a.tag.toLowerCase()){case"input":case"textarea":case"select":a.attrs.name&&""!=a.attrs.name||(t=!1,u.push(e.getFieldLabelAndId(a)))}n[a.tag]&&(t=t&&n[a.tag](a))})),this.nameMissing&&(c=Array.prototype.concat([this.nameMissing],c)),0!=this.errors.length&&i.default.alert("danger",this.errors.join("<br>")),t}},{key:"errors",get:function(){return c}},{key:"nameMissing",get:function(){return 0==u.length?"":(0,l.getString)("efb-missing-name-attribute-field",u.join(", "))}}]),e}());t.default=d},function(){"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t,n=Object(e),a=1;a<arguments.length;a++)if(null!=(t=arguments[a]))for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);return n})},function(){"function"!=typeof Object.values&&(Object.values=function(e){for(var t=Object.keys(e),n=t.length,a=Array(n);n--;)a[n]=e[t[n]];return a})},function(){function e(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var n=e instanceof Node;t.appendChild(n?e:document.createTextNode(e+""))})),this.appendChild(t)}function t(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var n=e instanceof Node;t.appendChild(n?e:document.createTextNode(e+""))})),this.insertBefore(t,this.firstChild)}function n(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var n=e instanceof Node;t.appendChild(n?e:document.createTextNode(e+""))})),this.parentNode.insertBefore(t,this)}function a(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var n=e instanceof Node;t.appendChild(n?e:document.createTextNode(e+""))})),this.parentNode.insertBefore(t,this.nextSibling)}function o(){null!==this.parentNode&&this.parentNode.removeChild(this)}function r(){var e,t=this.parentNode,n=arguments.length;if(t)for(n||t.removeChild(this);n--;)"object"==typeof(e=arguments[n])?e.parentNode&&e.parentNode.removeChild(e):e=this.ownerDocument.createTextNode(e),n?t.insertBefore(e,this.previousSibling):t.replaceChild(e,this)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(i){i.hasOwnProperty("append")||Object.defineProperty(i,"append",{configurable:!0,enumerable:!0,writable:!0,value:e}),i.hasOwnProperty("prepend")||Object.defineProperty(i,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:t}),i.hasOwnProperty("before")||Object.defineProperty(i,"before",{configurable:!0,enumerable:!0,writable:!0,value:n}),i.hasOwnProperty("after")||Object.defineProperty(i,"after",{configurable:!0,enumerable:!0,writable:!0,value:a}),i.hasOwnProperty("remove")||Object.defineProperty(i,"remove",{configurable:!0,enumerable:!0,writable:!0,value:o}),i.replaceWith||(i.replaceWith=r)}))},function(){[Element.prototype,CharacterData.prototype,DocumentType.prototype].filter(Boolean).forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})}))}]);
});